{"version":3,"file":"aframe-player.umd.js","sources":["aframe-player.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status.js\";\nimport { HAXWiring } from \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport { SchemaBehaviors } from \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport \"@lrnwebcomponents/es-global-bridge/es-global-bridge.js\";\n/**\n * `aframe-player`\n * `A wrapper to do data binding into aframe`\n *\n * @demo demo/index.html\n */\nclass AframePlayer extends SchemaBehaviors(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          position: relative;\n        }\n        .a-hidden {\n          display: hidden;\n        }\n      </style>\n      <a-scene\n        id=\"scene\"\n        class=\"embedded\"\n        embedded\n        arjs$=\"[[ar]]\"\n        style$=\"height:[[height]];width:[[width]];\"\n      >\n        <a-sky color\\$=\"[[skyColor]]\"></a-sky>\n        <a-marker-camera preset=\"hiro\"></a-marker-camera>\n      </a-scene>\n    `;\n  }\n\n  static get tag() {\n    return \"aframe-player\";\n  }\n\n  static get properties() {\n    let props = {\n      /**\n       * Source to reference for the 3D object\n       */\n      source: {\n        type: String,\n        value: \"\"\n      },\n      /**\n       * height of the element\n       */\n      height: {\n        type: String,\n        value: \"480px\"\n      },\n      /**\n       * width of the element\n       */\n      width: {\n        type: String,\n        value: \"640px\"\n      },\n      /**\n       * Color of the sky / background.\n       */\n      skyColor: {\n        type: String,\n        value: \"#DCDCDC\"\n      },\n      /**\n       * If this is for augmented reality or not.\n       */\n      ar: {\n        type: Boolean,\n        value: false\n      },\n      /**\n       * x position for the AR element.\n       */\n      x: {\n        type: String,\n        value: \"0\"\n      },\n      /**\n       * y position for the AR element.\n       */\n      y: {\n        type: String,\n        value: \"0\"\n      },\n      /**\n       * z position for the AR element.\n       */\n      z: {\n        type: String,\n        value: \"0\"\n      },\n      /**\n       * Generate a position object when coordinates change.\n       */\n      position: {\n        type: Object,\n        computed: \"_computePosition(x, y, z, width, height)\",\n        observer: \"_positionChanged\"\n      }\n    };\n    if (super.properties) {\n      props = Object.assign(props, super.properties);\n    }\n    return props;\n  }\n  /**\n   * highjack shadowDom\n   */\n  _attachDom(dom) {\n    this.appendChild(dom);\n  }\n  disconnectedCallback() {\n    window.removeEventListener(\n      \"es-bridge-aframePlayer-loaded\",\n      this._aframeLoaded.bind(this)\n    );\n    super.disconnectedCallback();\n  }\n  constructor() {\n    super();\n    afterNextRender(this, function() {\n      this.HAXWiring = new HAXWiring();\n      this.HAXWiring.setup(AframePlayer.haxProperties, AframePlayer.tag, this);\n    });\n  }\n  static get haxProperties() {\n    return {\n      canScale: false,\n      canPosition: false,\n      canEditSource: false,\n      gizmo: {\n        title: \"3D player\",\n        description: \"A 3D file / augmented reality player.\",\n        icon: \"av:play-circle-filled\",\n        color: \"amber\",\n        groups: [\"3D\", \"Augmented reality\"],\n        handles: [\n          {\n            type: \"3d\",\n            source: \"source\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"height\",\n            title: \"height\",\n            description: \"height of the object\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"image:photo-size-select-small\",\n            required: true\n          },\n          {\n            property: \"width\",\n            title: \"Width\",\n            description: \"Width of the object\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"image:straighten\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"source\",\n            title: \"Source\",\n            description: \"The URL for this AR file.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"link\",\n            required: true\n          },\n          {\n            property: \"x\",\n            title: \"X\",\n            description: \"X position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"y\",\n            title: \"Y\",\n            description: \"Y position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"z\",\n            title: \"Z\",\n            description: \"Z position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"skyColor\",\n            title: \"Sky color\",\n            description: \"Select the color of the sky in the scene.\",\n            inputMethod: \"colorpicker\",\n            type: \"bar\",\n            icon: \"editor:format-color-fill\"\n          }\n        ],\n        advanced: []\n      }\n    };\n  }\n  /**\n   * Attached.\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    let location = \"https://aframe.io/releases/0.9.2/aframe.min.js\";\n    if (typeof TWEEN === \"object\") this._aframeLoaded.bind(this);\n    window.addEventListener(\n      \"es-bridge-aframePlayer-loaded\",\n      this._aframeLoaded.bind(this)\n    );\n    window.ESGlobalBridge.requestAvailability();\n    window.ESGlobalBridge.instance.load(\"aframePlayer\", location);\n  }\n\n  _aframeLoaded(el) {\n    // ensure that this doesn't put full screen styles on the page!\n    this.$.scene.removeFullScreenStyles();\n    this.__entity = document.createElement(\"a-entity\");\n    this.__entity.setAttribute(\"gltf-model\", \"url(\" + this.source + \")\");\n    this._positionChanged();\n    this.$.scene.appendChild(this.__entity);\n  }\n\n  /**\n   * Generate position object based on format a-frame expects.\n   */\n  _computePosition(x, y, z, width, height) {\n    return {\n      x: x,\n      y: y,\n      z: z\n    };\n  }\n\n  /**\n   * When position is updated, inject this into a-frame tag.\n   */\n  _positionChanged(position) {\n    if (this.__entity !== undefined)\n      this.__entity.setAttribute(\"position\", position);\n  }\n}\nwindow.customElements.define(AframePlayer.tag, AframePlayer);\nexport { AframePlayer };\n"],"names":["AframePlayer","afterNextRender","HAXWiring","setup","haxProperties","tag","this","SchemaBehaviors","PolymerElement","dom","appendChild","window","removeEventListener","_aframeLoaded","bind","html","props","source","type","String","value","height","width","skyColor","ar","Boolean","x","y","z","position","Object","computed","observer","assign","TWEEN","addEventListener","ESGlobalBridge","requestAvailability","instance","load","el","$","scene","removeFullScreenStyles","__entity","document","createElement","setAttribute","_positionChanged","undefined","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","meta","author","settings","quick","property","inputMethod","required","configure","advanced","customElements","define"],"mappings":"i+FAeMA,gOAoHFC,uBAAsB,gBACfC,UAAY,IAAIA,iBAChBA,UAAUC,MAAMH,EAAaI,cAAeJ,EAAaK,IAAKC,sPAtH9CC,kBAAgBC,yDAwG9BC,QACJC,YAAYD,kDAGjBE,OAAOC,oBACL,gCACAN,KAAKO,cAAcC,KAAKR,0GA5GnBS,8CAwBA,uDAIHC,EAAQ,CAIVC,OAAQ,CACNC,KAAMC,OACNC,MAAO,IAKTC,OAAQ,CACNH,KAAMC,OACNC,MAAO,SAKTE,MAAO,CACLJ,KAAMC,OACNC,MAAO,SAKTG,SAAU,CACRL,KAAMC,OACNC,MAAO,WAKTI,GAAI,CACFN,KAAMO,QACNL,OAAO,GAKTM,EAAG,CACDR,KAAMC,OACNC,MAAO,KAKTO,EAAG,CACDT,KAAMC,OACNC,MAAO,KAKTQ,EAAG,CACDV,KAAMC,OACNC,MAAO,KAKTS,SAAU,CACRX,KAAMY,OACNC,SAAU,2CACVC,SAAU,wDAIZhB,EAAQc,OAAOG,OAAOjB,8BAEjBA,2GAwHc,gCAAVkB,oBAAAA,SAAoB5B,KAAKO,cAAcC,KAAKR,MACvDK,OAAOwB,iBACL,gCACA7B,KAAKO,cAAcC,KAAKR,OAE1BK,OAAOyB,eAAeC,sBACtB1B,OAAOyB,eAAeE,SAASC,KAAK,eAPrB,wFAUHC,QAEPC,EAAEC,MAAMC,8BACRC,SAAWC,SAASC,cAAc,iBAClCF,SAASG,aAAa,aAAc,OAASzC,KAAKW,OAAS,UAC3D+B,wBACAP,EAAEC,MAAMhC,YAAYJ,KAAKsC,mDAMflB,EAAGC,EAAGC,EAAGN,EAAOD,SACxB,CACLK,EAAGA,EACHC,EAAGA,EACHC,EAAGA,4CAOUC,QACOoB,IAAlB3C,KAAKsC,UACPtC,KAAKsC,SAASG,aAAa,WAAYlB,iDAnIlC,CACLqB,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,YACPC,YAAa,wCACbC,KAAM,wBACNC,MAAO,QACPC,OAAQ,CAAC,KAAM,qBACfC,QAAS,CACP,CACEzC,KAAM,KACND,OAAQ,WAGZ2C,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,SACVV,MAAO,SACPC,YAAa,uBACbU,YAAa,YACb/C,KAAM,MACNsC,KAAM,gCACNU,UAAU,GAEZ,CACEF,SAAU,QACVV,MAAO,QACPC,YAAa,sBACbU,YAAa,YACb/C,KAAM,MACNsC,KAAM,mBACNU,UAAU,IAGdC,UAAW,CACT,CACEH,SAAU,SACVV,MAAO,SACPC,YAAa,4BACbU,YAAa,YACb/C,KAAM,MACNsC,KAAM,OACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACb/C,KAAM,MACNsC,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACb/C,KAAM,MACNsC,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACb/C,KAAM,MACNsC,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,WACVV,MAAO,YACPC,YAAa,4CACbU,YAAa,cACb/C,KAAM,MACNsC,KAAM,6BAGVY,SAAU,cA+ClBzD,OAAO0D,eAAeC,OAAOtE,EAAaK,IAAKL"}
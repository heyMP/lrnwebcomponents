!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/polymer/polymer-element.js"),require("@polymer/polymer/lib/utils/render-status.js"),require("@lrnwebcomponents/smooth-scroll/smooth-scroll.js"),require("@lrnwebcomponents/map-menu/lib/map-menu-builder.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-element.js","@polymer/polymer/lib/utils/render-status.js","@lrnwebcomponents/smooth-scroll/smooth-scroll.js","@lrnwebcomponents/map-menu/lib/map-menu-builder.js"],t):t((e=e||self).MapMenu={},e.polymerElement_js,e.renderStatus_js)}(this,function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(){var e,t,n=(e=['\n      <style>\n        :host {\n          --map-menu-active-color: rgba(0, 0, 0, 0.1);\n          display: block;\n          overflow-y: scroll;\n          position: relative;\n          height: 100%;\n          transition: 0.2s linear all;\n          opacity: 1;\n          background-color: transparent;\n        }\n\n        #activeIndicator {\n          background: var(--map-menu-active-color);\n          transition: all 0.3s ease-in-out;\n          position: absolute;\n          @apply --map-menu-active-indicator;\n        }\n\n        map-menu-container {\n          padding: 32px;\n          @apply --map-menu-container;\n        }\n\n        /* turn default active color if indicator is on */\n        :host([active-indicator]) map-menu-builder {\n          --map-menu-active-color: transparent;\n        }\n      </style>\n      <div id="itemslist">\n        <map-menu-container>\n          <div id="activeIndicator"></div>\n          <map-menu-builder\n            id="builder"\n            items="[[items]]"\n            selected="[[selected]]"\n          ></map-menu-builder>\n        </map-menu-container>\n      </div>\n      <smooth-scroll id="smoothScroll"></smooth-scroll>\n    '],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return c=function(){return n},n}var s=function(e){function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),e=a(this,r(s).call(this)),import("@lrnwebcomponents/map-menu/lib/map-menu-container.js"),e}var u,d,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,t.PolymerElement),u=s,p=[{key:"template",get:function(){return t.html(c())}},{key:"tag",get:function(){return"map-menu"}},{key:"properties",get:function(){return{disabled:{type:Boolean,value:!1,reflectToAttribute:!0},title:{type:String,value:"Content Outline"},data:{type:Array,value:null},manifest:{type:Object,notify:!0,observer:"_manifestChanged"},items:{type:Array,value:null,notify:!0},selected:{type:String,notify:!0},autoScroll:{type:Boolean,value:!1},activeIndicator:{type:Boolean,value:!1}}}},{key:"observers",get:function(){return["_dataChanged(data)"]}}],(d=[{key:"ready",value:function(){l(r(s.prototype),"ready",this).call(this),n.afterNextRender(this,function(){this.addEventListener("link-clicked",this.__linkClickedHandler.bind(this)),this.addEventListener("toggle-updated",this.__toggleUpdated.bind(this)),this.addEventListener("active-item",this.__activeItemHandler.bind(this)),this.addEventListener("map-meu-item-hidden-check",this._mapMeuItemHiddenCheckHandler.bind(this))})}},{key:"__activeItemHandler",value:function(e){var t=e.detail;this.refreshActiveChildren(t)}},{key:"_mapMeuItemHiddenCheckHandler",value:function(e){var t=e.detail.action,n=(e.detail.target,e.detail.hiddenChild);"closed"===t&&!0===n?this.__updateActiveIndicator(this._activeItem,200,!0):this.__updateActiveIndicator(this._activeItem,200,!1)}},{key:"refreshActiveChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=this._activeItem,i=e;i&&""!==i&&(i.setAttribute("active",!0),this.activeIndicator&&this.__updateActiveIndicator(i,t),this.autoScroll&&this.$.smoothScroll.scroll(i,{duration:300,scrollElement:this})),n&&(n.removeAttribute("active"),this.__updateActiveIndicator(i,t)),this._activeItem=i}},{key:"_manifestChanged",value:function(e,t){e&&this.set("data",e.items)}},{key:"setData",value:function(e){this.set("data",[]),this.set("data",e)}},{key:"_dataChanged",value:function(e){var t=this,n=[];e&&(e.forEach(function(e){e.parent||n.push(e)}),n.forEach(function(n,i){t._setChildren(n,e)}),this.set("items",[]),this.set("items",n))}},{key:"_setChildren",value:function(e,t){var n=this,i=t.filter(function(t){return e.id===t.parent});e.children=i,e.children.length>0&&e.children.forEach(function(e){n._setChildren(e,t)})}},{key:"__hasChildren",value:function(e){return e.children.length>0}},{key:"__linkClickedHandler",value:function(e){this.selected=e.detail.id,this.dispatchEvent(new CustomEvent("selected",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail.id}))}},{key:"__toggleUpdated",value:function(e){var t=e.detail.opened?"opened":"closed",n=e.path[0];void 0!==this._activeItem&&this._activeItem.dispatchEvent(new CustomEvent("map-menu-item-hidden-check",{bubbles:!0,cancelable:!0,composed:!0,detail:Object.assign({},{action:t,target:n})}))}},{key:"__isInViewport",value:function(e){var t=this.__getScrollParent(e);if(!t)return!1;var n=e.offsetTop,i=n+e.offsetHeight,r=t.offsetTop,o=r+t.offsetHeight;return i>r&&n<o}},{key:"__getScrollParent",value:function(e){return null==e?null:e.scrollHeight>e.clientHeight?e:this.__getScrollParent(e.parentNode)}},{key:"__updateActiveIndicator",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];setTimeout(function(){var r=t.$.activeIndicator,o=e.offsetLeft,a=(e.offsetBottom,e.offsetTop),l=e.offsetWidth,c=i?0:e.offsetHeight;n=c>0?n:10,r.setAttribute("style","width:".concat(l,"px;height:").concat(c,"px;top:").concat(a,"px;left:").concat(o,"px"))},n)}},{key:"__parentsHidden",value:function(e){var t=e.parentNode;return null==t?null:"MAP-MENU-SUBMENU"===t.tagName&&!t.opened||"MAP-MENU"!==t.tagName&&this.__parentsHidden(t)}}])&&i(u.prototype,d),p&&i(u,p),s}();window.customElements.define(s.tag,s),e.MapMenu=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=map-menu.umd.js.map

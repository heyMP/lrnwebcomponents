{"version":3,"file":"simple-blog.umd.js","sources":["simple-blog.umd.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { HAXCMSTheme } from \"@lrnwebcomponents/haxcms-elements/lib/core/HAXCMSThemeWiring.js\";\nimport { store } from \"@lrnwebcomponents/haxcms-elements/lib/core/haxcms-site-store.js\";\nimport { autorun, toJS } from \"mobx\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status.js\";\nimport \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"@lrnwebcomponents/simple-blog/lib/simple-blog-listing.js\";\nimport \"@lrnwebcomponents/simple-blog/lib/simple-blog-post.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\n/**\n * `simple-blog`\n * `A simple blog and associated elements`\n * @demo demo/index.html\n */\nclass SimpleBlog extends HAXCMSTheme(PolymerElement) {\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"simple-blog\";\n  }\n  // render function\n  static get template() {\n    return html`\n      <style>\n        html,\n        body {\n          background-color: #fafafa;\n        }\n      </style>\n\n      <style>\n        :host {\n          display: block;\n          font-family: \"Roboto\", \"Noto\", sans-serif;\n          -webkit-font-smoothing: antialiased;\n          font-size: 14px;\n          background-color: #fafafa;\n          font-family: \"Open Sans\", \"MundoSans\", helvetica neue, Arial,\n            Helvetica, sans-serif;\n          margin: 0;\n          padding: 0;\n          text-rendering: optimizeLegibility;\n          -webkit-font-smoothing: antialiased;\n          -moz-font-feature-settings: \"liga=1, dlig=1\";\n          -ms-font-feature-settings: \"liga\", \"dlig\";\n          -webkit-font-feature-settings: \"liga\", \"dlig\";\n          -o-font-feature-settings: \"liga\", \"dlig\";\n          font-feature-settings: \"liga\", \"dlig\";\n        }\n        #backbutton {\n          position: fixed;\n          top: 0px;\n          left: 0px;\n          padding: 2px;\n          width: 40px;\n          height: 40px;\n          margin: 8px;\n          z-index: 1000;\n          color: black;\n          background-color: rgba(250, 250, 250, 0.5);\n          opacity: 0.5;\n          border-radius: 50%;\n          transition: all 0.6s linear;\n        }\n        #backbutton:focus,\n        #backbutton:hover {\n          opacity: 1;\n          color: white;\n          background-color: var(--haxcms-color, black);\n        }\n        iron-pages,\n        iron-pages section {\n          width: 100vw;\n          height: 100vh;\n        }\n        simple-blog-post {\n          transition: all 0.6s ease-in-out;\n          visibility: hidden;\n        }\n        :host([selected-page=\"0\"]) simple-blog-post {\n          visibility: visible;\n          opacity: 0;\n          visibility: hidden;\n        }\n        :host([selected-page=\"1\"]) simple-blog-post {\n          visibility: visible;\n          opacity: 1;\n        }\n        a,\n        a:active,\n        a:hover,\n        a:focus {\n          color: inherit;\n        }\n      </style>\n      <iron-pages selected=\"[[selectedPage]]\">\n        <section>\n          <simple-blog-header></simple-blog-header>\n          <simple-blog-listing></simple-blog-listing>\n        </section>\n        <section>\n          <paper-icon-button\n            id=\"backbutton\"\n            icon=\"icons:arrow-back\"\n            on-click=\"_goBack\"\n          ></paper-icon-button>\n          <paper-tooltip\n            for=\"backbutton\"\n            position=\"right\"\n            offset=\"14\"\n            animation-delay=\"100\"\n            >Back to listing\n          </paper-tooltip>\n          <simple-blog-post edit-mode=\"[[editMode]]\"\n            ><slot></slot\n          ></simple-blog-post>\n          <simple-blog-footer id=\"footer\"></simple-blog-footer>\n        </section>\n      </iron-pages>\n    `;\n  }\n  /**\n   * Mix in an opened status\n   */\n  static get properties() {\n    let props = super.properties;\n    props.selectedPage = {\n      type: Number,\n      reflectToAttribute: true,\n      value: 0\n    };\n    return props;\n  }\n  constructor() {\n    super();\n    import(\"@lrnwebcomponents/simple-blog/lib/simple-blog-header.js\");\n    import(\"@polymer/paper-icon-button/paper-icon-button.js\");\n    import(\"@lrnwebcomponents/simple-blog/lib/simple-blog-footer.js\");\n    this.__disposer = [];\n    autorun(reaction => {\n      this.activeId = toJS(store.activeId);\n      this.__disposer.push(reaction);\n    });\n    autorun(reaction => {\n      this._locationChanged(store.location);\n      this.__disposer.push(reaction);\n    });\n  }\n  /**\n   * attached life cycle\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    afterNextRender(this, () => {\n      this.contentContainer = this.shadowRoot.querySelector(\n        \"simple-blog-post\"\n      ).$.contentcontainer;\n    });\n  }\n  /**\n   * detatched life cycle\n   */\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    // clean up state\n    for (var i in this.__disposer) {\n      this.__disposer[i].dispose();\n    }\n  }\n  /**\n   * Listen for router location changes\n   * @param {event} e\n   */\n  _locationChanged(location) {\n    if (!location || typeof location.route === \"undefined\") return;\n    const name = location.route.name;\n    if (name === \"home\" || name === \"404\") {\n      this.selectedPage = 0;\n    } else {\n      window.scrollTo({\n        top: 0,\n        left: 0\n      });\n      this.selectedPage = 1;\n    }\n  }\n  /**\n   * Reset the active item to reset state\n   */\n  _goBack(e) {\n    const prevActiveItemId = store.activeId;\n    window.history.pushState(null, null, store.location.baseUrl);\n    window.dispatchEvent(new PopStateEvent(\"popstate\"));\n    // should help account for starting on a page where popstate isn't set\n    // and also generate data model mirroring\n    if (prevActiveItemId) {\n      setTimeout(() => {\n        let active = this.shadowRoot\n          .querySelector(\"simple-blog-listing\")\n          .shadowRoot.querySelector(\n            'simple-blog-overview[item-id=\"' + prevActiveItemId + '\"]'\n          );\n        if (active) {\n          active.scrollIntoView(true);\n          active.focus();\n        }\n      }, 100);\n    } else {\n      window.scrollTo({\n        top: 0,\n        left: 0\n      });\n    }\n    const evt = new CustomEvent(\"json-outline-schema-active-item-changed\", {\n      bubbles: true,\n      cancelable: true,\n      detail: {}\n    });\n    this.dispatchEvent(evt);\n    this.selectedPage = 0;\n  }\n}\nwindow.customElements.define(SimpleBlog.tag, SimpleBlog);\nexport { SimpleBlog };\n"],"names":["SimpleBlog","__disposer","autorun","reaction","activeId","toJS","store","push","_locationChanged","location","HAXCMSTheme","PolymerElement","html","props","selectedPage","type","Number","reflectToAttribute","value","afterNextRender","this","_this2","contentContainer","shadowRoot","querySelector","$","contentcontainer","i","dispose","route","name","window","scrollTo","top","left","e","prevActiveItemId","history","pushState","baseUrl","dispatchEvent","PopStateEvent","setTimeout","active","_this3","scrollIntoView","focus","evt","CustomEvent","bubbles","cancelable","detail","customElements","define","tag"],"mappings":"8kKAcMA,8KA2HK,kEACA,0DACA,6DACFC,WAAa,GAClBC,UAAQ,SAAAC,KACDC,SAAWC,OAAKC,QAAMF,YACtBH,WAAWM,KAAKJ,KAEvBD,UAAQ,SAAAC,KACDK,iBAAiBF,QAAMG,YACvBR,WAAWM,KAAKJ,mPArIFO,cAAYC,6DAM1B,sDAIAC,mDAuGHC,mCACJA,EAAMC,aAAe,CACnBC,KAAMC,OACNC,oBAAoB,EACpBC,MAAO,GAEFL,sHAsBPM,kBAAgBC,KAAM,WACpBC,EAAKC,iBAAmBD,EAAKE,WAAWC,cACtC,oBACAC,EAAEC,sEASD,IAAIC,8DAAKP,KAAKnB,gBACZA,WAAW0B,GAAGC,mDAONnB,MACVA,QAAsC,IAAnBA,EAASoB,WAC3BC,EAAOrB,EAASoB,MAAMC,KACf,SAATA,GAA4B,QAATA,OAChBhB,aAAe,GAEpBiB,OAAOC,SAAS,CACdC,IAAK,EACLC,KAAM,SAEHpB,aAAe,oCAMhBqB,cACAC,EAAmB9B,QAAMF,SAC/B2B,OAAOM,QAAQC,UAAU,KAAM,KAAMhC,QAAMG,SAAS8B,SACpDR,OAAOS,cAAc,IAAIC,cAAc,aAGnCL,EACFM,WAAW,eACLC,EAASC,EAAKrB,WACfC,cAAc,uBACdD,WAAWC,cACV,iCAAmCY,EAAmB,MAEtDO,IACFA,EAAOE,gBAAe,GACtBF,EAAOG,UAER,KAEHf,OAAOC,SAAS,CACdC,IAAK,EACLC,KAAM,QAGJa,EAAM,IAAIC,YAAY,0CAA2C,CACrEC,SAAS,EACTC,YAAY,EACZC,OAAQ,UAELX,cAAcO,QACdjC,aAAe,WAGxBiB,OAAOqB,eAAeC,OAAOrD,EAAWsD,IAAKtD"}
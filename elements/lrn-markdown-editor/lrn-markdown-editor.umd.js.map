{"version":3,"file":"lrn-markdown-editor.umd.js","sources":["lib/lrn-markdown-editor-editor.js","lrn-markdown-editor.umd.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/mtz-marked-editor.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-wrap.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-generic-line.js\";\nimport \"@lrnwebcomponents/mtz-marked-editor/lib/mtz-marked-control-link.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-icons/places-icons.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/paper-input/paper-textarea.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nclass LrnMarkdownEditorEditor extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n\n        .mtz-controls {\n          display: flex;\n          width: 100%;\n        }\n\n        .mtz-toolbar {\n          flex-grow: 5;\n        }\n      </style>\n      <mtz-marked-editor id=\"markededitor\">\n        <div slot=\"controls\" class=\"mtz-controls\">\n          <mtz-marked-control-generic-wrap\n            icon=\"editor:format-bold\"\n            title=\"Bold\"\n            syntax-prefix=\"**\"\n            syntax-suffix=\"**\"\n            keys=\"ctrl+b\"\n          ></mtz-marked-control-generic-wrap>\n          <mtz-marked-control-generic-wrap\n            icon=\"editor:format-italic\"\n            title=\"Italic\"\n            syntax-prefix=\"_\"\n            syntax-suffix=\"_\"\n            keys=\"ctrl+i\"\n          ></mtz-marked-control-generic-wrap>\n          <mtz-marked-control-generic-line\n            icon=\"editor:format-size\"\n            title=\"Heading\"\n            syntax-prefix=\"# \"\n          ></mtz-marked-control-generic-line>\n          <mtz-marked-control-generic-line\n            icon=\"editor:format-list-numbered\"\n            title=\"Ordered List\"\n            syntax-prefix=\"1. \"\n          ></mtz-marked-control-generic-line>\n          <mtz-marked-control-generic-line\n            icon=\"editor:format-list-bulleted\"\n            title=\"Unordered List\"\n            syntax-prefix=\"- \"\n          ></mtz-marked-control-generic-line>\n          <mtz-marked-control-link\n            icon=\"editor:insert-link\"\n            title=\"Link\"\n          ></mtz-marked-control-link>\n        </div>\n        <paper-textarea\n          slot=\"textarea\"\n          label=\"Start typing...\"\n          value=\"{{content}}\"\n        ></paper-textarea>\n      </mtz-marked-editor>\n    `;\n  }\n\n  static get tag() {\n    return \"lrn-markdown-editor-editor\";\n  }\n\n  static get properties() {\n    return {\n      content: {\n        type: String,\n        notify: true\n      }\n    };\n  }\n\n  _changed(e) {\n    var content = this.$.markededitor.getContent();\n    this.set(\"content\", content);\n    this.dispatchEvent(\n      new CustomEvent(\"content-updated\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: { content: this.content }\n      })\n    );\n  }\n}\nwindow.customElements.define(\n  LrnMarkdownEditorEditor.tag,\n  LrnMarkdownEditorEditor\n);\nexport { LrnMarkdownEditorEditor };\n","/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/paper-tabs/paper-tabs.js\";\nimport \"@polymer/marked-element/marked-element.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"./lib/lrn-markdown-editor-editor.js\";\n/**\n * `lrn-markdown-editor`\n * `Side by side markdown to HTML editor + preview pane`\n *\n * @microcopy - language worth noting:\n *  - often used for quick field editing interfaces w/ minimal input allowed\n * @polymer\n * @customElement\n * @demo demo/index.html\n */\nclass LrnMarkdownEditor extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n\n        #split-pane {\n          display: flex;\n        }\n\n        .split-pane > * {\n          flex: 1 1 auto;\n          min-height: 160px;\n        }\n\n        .preview-pane {\n          background: lightblue;\n        }\n\n        paper-card {\n          padding: 16px;\n          width: calc(100% - 32px);\n        }\n\n        paper-tabs {\n          background: #f5f5f5;\n          border-style: solid;\n          border-color: #dcdcdc;\n          border-width: 1px;\n          min-width: 500px;\n        }\n\n        marked-element.lrn-markdown-editor {\n          width: 100%;\n          word-wrap: break-word;\n        }\n\n        .container-flex {\n          display: flex;\n          flex-wrap: nowrap;\n        }\n\n        .split-pane .container-flex > * {\n          width: 50%;\n        }\n\n        .split-pane marked-element {\n          width: calc(100% - 32px);\n          min-width: 150px;\n          margin: 0 16px;\n          padding: 0 16px;\n          background: #fff;\n          border-left: solid #dcdcdc 1px;\n        }\n      </style>\n\n      <div class=\"mtz-toolbar\">\n        <paper-tabs selected=\"{{selected}}\">\n          <paper-tab>Write</paper-tab>\n          <paper-tab>Preview</paper-tab>\n          <paper-tab>Split View</paper-tab>\n        </paper-tabs>\n      </div>\n\n      <iron-pages selected=\"{{selected}}\">\n        <section>\n          <paper-card>\n            <lrn-markdown-editor-editor\n              content=\"{{content}}\"\n            ></lrn-markdown-editor-editor>\n          </paper-card>\n        </section>\n\n        <section>\n          <paper-card>\n            <marked-element markdown=\"{{content}}\"></marked-element>\n          </paper-card>\n        </section>\n\n        <section class=\"split-pane\">\n          <paper-card>\n            <div class=\"container-flex\">\n              <lrn-markdown-editor-editor\n                content=\"{{content}}\"\n              ></lrn-markdown-editor-editor>\n              <marked-element\n                class=\"preview-pane\"\n                markdown=\"{{content}}\"\n              ></marked-element>\n            </div>\n          </paper-card>\n        </section>\n      </iron-pages>\n    `;\n  }\n\n  static get tag() {\n    return \"lrn-markdown-editor\";\n  }\n\n  static get properties() {\n    return {\n      content: {\n        type: String,\n        notify: true\n      },\n      selected: {\n        type: String,\n        value: \"0\",\n        reflectToAttribute: true\n      },\n      layout: {\n        type: String,\n        value: 0\n      },\n      cookies: {\n        type: Boolean,\n        value: true\n      },\n      elReady: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n\n  static get observers() {\n    return [\"_selectedChanged(selected)\"];\n  }\n\n  _selectedChanged(selected) {\n    var root = this;\n    var cookieName = root._getCookieName();\n    // get current cookies\n    // if the 'split-view' pane is selected\n    if (selected === 2) {\n      // add a cookie for lrn-markdown-editor-splitview\n      root._createCookie(cookieName, \"true\", \"30\");\n    } else if (selected !== 2 && root.elReady === true) {\n      /**\n       * @todo: this is erasing the cookie erroneously\n       */\n      root._eraseCookie(cookieName);\n    }\n  }\n\n  _createCookie(name, value, days) {\n    var expires = \"\";\n    if (days) {\n      var date = new Date();\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n      expires = \"; expires=\" + date.toUTCString();\n    }\n    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n  }\n\n  _readCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(\";\");\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) == \" \") c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  }\n\n  _eraseCookie(name) {\n    this._createCookie(name, \"\", -1);\n  }\n\n  _getCookieName() {\n    return \"lrnmarkdowneditorsplitview\";\n  }\n\n  ready() {\n    super.ready();\n    var root = this;\n    // tell others we are ready\n    root.elReady = true;\n    // get the cookie for splitview\n    var cookieName = root._getCookieName();\n    var cookie = root._readCookie(cookieName);\n    // if there is a cookie set for splitview\n    if (cookie && cookie === \"true\") {\n      // show splitview pane\n      root.selected = 2;\n    }\n  }\n}\nwindow.customElements.define(LrnMarkdownEditor.tag, LrnMarkdownEditor);\nexport { LrnMarkdownEditor };\n"],"names":["LrnMarkdownEditorEditor","PolymerElement","e","content","this","$","markededitor","getContent","set","dispatchEvent","CustomEvent","bubbles","cancelable","composed","detail","html","type","String","notify","window","customElements","define","tag","LrnMarkdownEditor","selected","cookieName","_getCookieName","_createCookie","elReady","_eraseCookie","name","value","days","expires","date","Date","setTime","getTime","toUTCString","document","cookie","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","_readCookie","reflectToAttribute","layout","cookies","Boolean"],"mappings":"4rJAUMA,0FAAgCC,sDA2E3BC,OACHC,EAAUC,KAAKC,EAAEC,aAAaC,kBAC7BC,IAAI,UAAWL,QACfM,cACH,IAAIC,YAAY,kBAAmB,CACjCC,SAAS,EACTC,YAAY,EACZC,UAAU,EACVC,OAAQ,CAAEX,QAASC,KAAKD,sDAjFrBY,8CA6DA,sEAIA,CACLZ,QAAS,CACPa,KAAMC,OACNC,QAAQ,yyEAkBhBC,OAAOC,eAAeC,OACpBrB,EAAwBsB,IACxBtB,OCjFIuB,0FAA0BtB,8DAoIbuB,OAEXC,EADOrB,KACWsB,iBAGL,IAAbF,EAJOpB,KAMJuB,cAAcF,EAAY,OAAQ,MACjB,IAAbD,IAAmC,IAPnCpB,KAOuBwB,SAPvBxB,KAWJyB,aAAaJ,yCAIRK,EAAMC,EAAOC,OACrBC,EAAU,MACVD,EAAM,KACJE,EAAO,IAAIC,KACfD,EAAKE,QAAQF,EAAKG,UAAmB,GAAPL,EAAY,GAAK,GAAK,KACpDC,EAAU,aAAeC,EAAKI,cAEhCC,SAASC,OAASV,EAAO,IAAMC,EAAQE,EAAU,+CAGvCH,WACNW,EAASX,EAAO,IAChBY,EAAKH,SAASC,OAAOG,MAAM,KACtBC,EAAI,EAAGA,EAAIF,EAAGG,OAAQD,IAAK,SAC9BE,EAAIJ,EAAGE,GACW,KAAfE,EAAEC,OAAO,IAAWD,EAAIA,EAAEE,UAAU,EAAGF,EAAED,WACvB,GAArBC,EAAEG,QAAQR,GAAc,OAAOK,EAAEE,UAAUP,EAAOI,OAAQC,EAAED,eAE3D,0CAGIf,QACNH,cAAcG,EAAM,IAAK,kDAIvB,uGAKI1B,KAENwB,SAAU,MAEXH,EAJOrB,KAIWsB,iBAClBc,EALOpC,KAKO8C,YAAYzB,GAE1Be,GAAqB,SAAXA,IAPHpC,KASJoB,SAAW,6CA1LXT,8CAiGA,+DAIA,CACLZ,QAAS,CACPa,KAAMC,OACNC,QAAQ,GAEVM,SAAU,CACRR,KAAMC,OACNc,MAAO,IACPoB,oBAAoB,GAEtBC,OAAQ,CACNpC,KAAMC,OACNc,MAAO,GAETsB,QAAS,CACPrC,KAAMsC,QACNvB,OAAO,GAETH,QAAS,CACPZ,KAAMsC,QACNvB,OAAO,4CAMJ,CAAC,uCA+DZZ,OAAOC,eAAeC,OAAOE,EAAkBD,IAAKC"}
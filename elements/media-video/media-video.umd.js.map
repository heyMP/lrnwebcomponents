{"version":3,"file":"media-video.umd.js","sources":["media-video.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n/**\n * `media-video`\n * `Video wrapper class`\n *\n * @demo demo/index.html\n */\nclass MediaVideo extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n\n  static get tag() {\n    return \"media-video\";\n  }\n  static get properties() {\n    return {};\n  }\n\n  ready() {\n    super.ready();\n    const videoSrc = this.querySelector(\"*[data-mediavideo-src]\");\n    this.addEventListener(\"click\", e => {\n      e.stopPropagation();\n      const target = dom(e).localTarget;\n      const videoContainer = this.querySelector(\".mediavideo\");\n      const videoPoster = this.querySelector(\".mediavideo-button-container\");\n      const videoSrc = this.querySelector(\"*[data-mediavideo-src]\");\n      videoPoster.classList.toggle(\"mediavideo-button-display\");\n      // Add the is-open tag to the base element.\n      videoContainer.classList.toggle(\"mediavideo--is-open\");\n      if (\n        target.classList.contains(\"poster--image\") ||\n        target.classList.contains(\"mediavideo-icon\")\n      ) {\n        // Give the animation enough time to complete.\n        setTimeout(() => {\n          this._startIframeVideo(videoSrc);\n        }, 500);\n      } else {\n        this._stopIframeVideo(videoSrc);\n      }\n    });\n  }\n  disconnectedCallback() {\n    this.removeEventListener(\"click\", e => {\n      e.stopPropagation();\n      const target = dom(e).localTarget;\n      const videoContainer = this.querySelector(\".mediavideo\");\n      const videoPoster = this.querySelector(\".mediavideo-button-container\");\n      const videoSrc = this.querySelector(\"*[data-mediavideo-src]\");\n      videoPoster.classList.toggle(\"mediavideo-button-display\");\n      // Add the is-open tag to the base element.\n      videoContainer.classList.toggle(\"mediavideo--is-open\");\n      if (\n        target.classList.contains(\"poster--image\") ||\n        target.classList.contains(\"mediavideo-icon\")\n      ) {\n        // Give the animation enough time to complete.\n        setTimeout(() => {\n          this._startIframeVideo(videoSrc);\n        }, 500);\n      } else {\n        this._stopIframeVideo(videoSrc);\n      }\n    });\n    super.disconnectedCallback();\n  }\n\n  _startIframeVideo(video) {\n    // Start the iframe videos.\n    var videoIframeSrc = video.dataset.mediavideoSrc;\n    // If it's a youtube or vimeo video then add an autoplay attr on the end\n    // of the url.\n    if (\n      videoIframeSrc.indexOf(\"youtube\") >= 0 ||\n      videoIframeSrc.indexOf(\"vimeo\") >= 0\n    ) {\n      // Find out if we need to fstart the query parameter or add\n      // on to an existing one.\n      if (videoIframeSrc.indexOf(\"?\") >= 0) {\n        videoIframeSrc += \"&autoplay=1\";\n      } else {\n        videoIframeSrc += \"?autoplay=1\";\n      }\n    }\n    // Add it to the source attribute to load the video.\n    video.setAttribute(\"src\", videoIframeSrc);\n  }\n\n  _stopIframeVideo(video) {\n    video.setAttribute(\"src\", \"\");\n  }\n}\nwindow.customElements.define(MediaVideo.tag, MediaVideo);\nexport { MediaVideo };\n"],"names":["MediaVideo","PolymerElement","html","this","querySelector","addEventListener","e","stopPropagation","target","dom","localTarget","videoContainer","_this","videoPoster","videoSrc","classList","toggle","contains","setTimeout","_startIframeVideo","_stopIframeVideo","removeEventListener","_this2","video","videoIframeSrc","dataset","mediavideoSrc","indexOf","setAttribute","window","customElements","define","tag"],"mappings":"oiDAYMA,gaAAmBC,+DAEdC,8CAWA,uDAGA,6FAKUC,KAAKC,cAAc,+BAC/BC,iBAAiB,QAAS,SAAAC,GAC7BA,EAAEC,sBACIC,EAASC,MAAIH,GAAGI,YAChBC,EAAiBC,EAAKR,cAAc,eACpCS,EAAcD,EAAKR,cAAc,gCACjCU,EAAWF,EAAKR,cAAc,0BACpCS,EAAYE,UAAUC,OAAO,6BAE7BL,EAAeI,UAAUC,OAAO,uBAE9BR,EAAOO,UAAUE,SAAS,kBAC1BT,EAAOO,UAAUE,SAAS,mBAG1BC,WAAW,WACTN,EAAKO,kBAAkBL,IACtB,KAEHF,EAAKQ,iBAAiBN,oEAKrBO,oBAAoB,QAAS,SAAAf,GAChCA,EAAEC,sBACIC,EAASC,MAAIH,GAAGI,YAChBC,EAAiBW,EAAKlB,cAAc,eACpCS,EAAcS,EAAKlB,cAAc,gCACjCU,EAAWQ,EAAKlB,cAAc,0BACpCS,EAAYE,UAAUC,OAAO,6BAE7BL,EAAeI,UAAUC,OAAO,uBAE9BR,EAAOO,UAAUE,SAAS,kBAC1BT,EAAOO,UAAUE,SAAS,mBAG1BC,WAAW,WACTI,EAAKH,kBAAkBL,IACtB,KAEHQ,EAAKF,iBAAiBN,wGAMVS,OAEZC,EAAiBD,EAAME,QAAQC,eAIjCF,EAAeG,QAAQ,YAAc,GACrCH,EAAeG,QAAQ,UAAY,KAI/BH,EAAeG,QAAQ,MAAQ,EACjCH,GAAkB,cAElBA,GAAkB,eAItBD,EAAMK,aAAa,MAAOJ,4CAGXD,GACfA,EAAMK,aAAa,MAAO,yCAG9BC,OAAOC,eAAeC,OAAO/B,EAAWgC,IAAKhC"}
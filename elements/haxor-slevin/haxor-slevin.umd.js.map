{"version":3,"file":"haxor-slevin.umd.js","sources":["haxor-slevin.umd.js"],"sourcesContent":["/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { HAXCMSTheme } from \"@lrnwebcomponents/haxcms-elements/lib/core/HAXCMSThemeWiring.js\";\nimport { store } from \"@lrnwebcomponents/haxcms-elements/lib/core/haxcms-site-store.js\";\nimport { autorun, toJS } from \"mobx\";\nimport { SimpleColors } from \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"@lrnwebcomponents/haxcms-elements/lib/ui-components/query/site-query.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/polymer/lib/elements/dom-repeat.js\";\n\n/**\n * `haxor-slevin`\n * `Tech blogger theme`\n *\n * @microcopy - language worth noting:\n *  -\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass HaxorSlevin extends HAXCMSTheme(PolymerElement) {\n  \n  // render function\n  static get template() {\n    return html`\n<style>:host {\n  display: block;\n  background-color: #FFFFFF;\n  color: rgba(0,0,0,.84);\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n\n:host([edit-mode]) #slot {\n  display: none;\n}\n#slot {\n  min-height: 50vh;\n}\n#slot ::slotted(p) {\n  margin-top: 29px;\n  font-family: Georgia,Cambria,\"Times New Roman\",Times,serif;\n  letter-spacing: .01rem;\n  font-weight: 400;\n  font-style: normal;\n  font-size: 21px;\n  line-height: 1.58;\n  letter-spacing: -.003em;\n  margin-bottom: 0;\n}\n#slot ::slotted(h1,h2,h3,h4,h5,h6) {\n  font-family: \"Lucida Grande\",\"Lucida Sans Unicode\",\"Lucida Sans\",Geneva,Arial,sans-serif;\n  letter-spacing: -.02em;\n  font-style: normal;\n  letter-spacing: 0;\n  font-size: 34px;\n  line-height: 1.15;\n  letter-spacing: -.015em;\n  font-weight: 600;\n  margin-top: 53px;\n}\n#slot ::slotted(h2,h3) {\n  font-size: 34px;\n}\n.wrapper {\n  padding-bottom: 80px;\n}\n#home {\n  max-width: 1032px;\n  padding-left: 20px;\n  padding-right: 20px;\n  margin: 0 auto;\n}\n.contentcontainer-wrapper {\n  max-width: 740px;\n  margin: 0 auto;\n  box-sizing: border-box;\n  padding-left: 20px;\n  padding-right: 20px;\n}\nsimple-blog-card {\n  padding: 8px;\n  min-height: 100px;\n  min-width: 100px;\n}\n.simple-blog-card-wrapper {\n  margin: 0 auto;\n  width: 100%;\n}\n.evenly {\n  display: flex;\n  justify-content: space-evenly;\n}\nsimple-blog-card[size=\"micro\"] {\n  padding: 4px;\n}\niron-pages {\n  padding-top: 64px;\n}\ndom-repeat {\n  padding-bottom: 16px;\n  min-height: 300px;\n}\napp-toolbar {\n  padding: 0 20px;\n  height: 54px;\n  max-width: 1032px;\n  margin: 0 auto;\n}\n.backbutton {\n  height: 54px;\n  border-radius: 0;\n  min-width: unset;\n  text-transform: unset;\n}\napp-header {\n  z-index: 100;\n  @apply --layout-fixed-top;\n  color: #FFFFFF;\n  box-shadow: 0 4px 12px 0 rgba(0,0,0,.15);\n  background-color: var(--haxcms-color);\n  --app-header-background-rear-layer: {\n    background-color: var(--haxcms-color);\n  };\n}\npaper-icon-button {\n  --paper-icon-button-ink-color: white;\n}\nsite-active-title {\n  --site-active-title-heading: {\n    font-size: 42px;\n    font-family: Georgia,Cambria,\"Times New Roman\",Times,serif;\n    font-weight: 400;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 1.25;\n    letter-spacing: 0;\n  };\n}\n\n.social-float {\n  top: 160px;\n  position: fixed;\n  z-index: 99;\n  margin-left: -10vw;\n}\n.social-float ul {\n  padding: 0;\n  margin: 0;\n  list-style: none;\n}\n\nsocial-share-link {\n  --social-share-button-bg: var(--haxcms-color);\n  --social-share-button: {\n    padding: 8px;\n    border-radius: 50%;\n  }\n}\n\n.annoy-user {\n  background-color: rgba(255,255,255,.9);\n  display: block;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  box-shadow: 0 -3px 10px 0 rgba(0,0,0,.0785);\n  right: 0;\n  padding: 10px 0;\n  height: 50px;\n  z-index: 100;\n}\niron-icon {\n  height: 40px;\n  width: 40px;\n  display: flex;\n  padding-right: 20px;\n}\n.annoy-user iron-icon {\n  color: black;\n}\n.annoy-user span {\n  flex: 1 1 auto;\n  height: 40px;\n  display: flex;\n  vertical-align: middle;\n  line-height: 40px;\n}\n.annoy-inner strong {\n  padding: 0 4px;\n}\n.annoy-user .rss {\n  margin-left: 50px;\n}\n.annoy-inner {\n  max-width:700px;\n  margin: 0 auto;\n  display: flex;\n}\n.subtitle {\n  font-family: \"Lucida Grande\",\"Lucida Sans Unicode\",\"Lucida Sans\",Geneva,Arial,sans-serif;\n  letter-spacing: -.02em;\n  font-weight: 300;\n  font-style: normal;\n  letter-spacing: 0;\n  font-size: 28px;\n  line-height: 1.22;\n  letter-spacing: -.012em;\n}\nsite-rss-button {\n  margin: 0 4px;\n  padding: 0;\n  --site-rss-color: #000000;\n  --site-rss-bg-color: var(--haxcms-color);\n  --site-rss-paper-button: {\n    padding: 0 4px;\n    margin: 0;\n  };\n}\n\n@media screen and (max-width: 800px) {\n  #contentcontainer, #home {\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n  .evenly {\n    display: unset;\n    justify-content: unset;\n  }\n  simple-blog-card {\n    padding: 0;\n  }\n  .hide-small {\n    display: none;\n  }\n}</style>\n<style>\n  html,body {\n    background-color: #FFFFFF;\n  }\n  :root,html,body,a {\n    color: rgba(0,0,0,.84);\n  }\n  </style>\n\n<app-header reveals>\n  <app-toolbar>\n    <div>\n      <paper-button class=\"backbutton\" on-click=\"_goBack\" title=\"Back to listing\">\n        <iron-icon icon=\"[[icon]]\"></iron-icon>\n        <span class=\"hide-small\">[[title]] - [[activeTitle]]</span>\n      </paper-button>\n    </div>\n    <div main-title>\n      <iron-image src=\"[[image]]\" preload sizing=\"cover\" style=\"height:46px;width:100%;margin: 4px 0 2px 0;\"></iron-image>\n    </div>\n    <div>\n      <site-modal icon=\"icons:search\" title=\"Search site\" button-label=\"Search\">\n        <site-search></site-search>\n      </site-modal>\n    </div>\n  </app-toolbar>\n</app-header>\n<div class=\"wrapper\">\n  <iron-pages selected=\"[[selectedPage]]\">\n    <div id=\"home\">\n      <site-query result=\"{{__mainPosts}}\" limit=\"2\" sort='{\"created\": \"ASC\"}'></site-query>\n      <div class=\"simple-blog-card-wrapper evenly\">\n        <dom-repeat items=\"[[__mainPosts]]\" as=\"post\" mutable-data>\n          <template>\n            <simple-blog-card alt=\"[[post.metadata.fields.images.0.alt]]\" color=\"[[color]]\"\n              title=\"[[post.title]]\"\n              size=\"large\"\n              link=\"[[post.location]]\"\n              image=\"[[_showImage(post.metadata.fields.images.0.src)]]\"\n              author=\"[[author.name]]\"\n              timestamp=\"[[post.created]]\"\n              readtime=\"[[post.metadata.readtime]]\"\n              authorimage=\"[[author.image]]\"\n              placeholder=\"[[image]]\"\n              authorlink=\"[[author.socialLink]]\">\n              [[post.description]]\n            </simple-blog-card>\n          </template>\n        </dom-repeat>\n      </div>\n      <site-query result=\"{{__posts}}\" start-index=\"2\" limit=\"6\" sort='{\"created\": \"ASC\"}'></site-query>\n      <div class=\"simple-blog-card-wrapper\">\n        <dom-repeat items=\"[[__posts]]\" as=\"post\" mutable-data>\n          <template>\n            <simple-blog-card \n            placeholder=\"[[image]]\"\n            alt=\"[[post.metadata.fields.images.0.alt]]\" color=\"[[color]]\" title=\"[[post.title]]\" size=\"medium\"\n              link=\"[[post.location]]\" image=\"[[_showImage(post.metadata.fields.images.0.src)]]\" author=\"[[author.name]]\"\n              timestamp=\"[[post.created]]\" readtime=\"[[post.metadata.readtime]]\" authorimage=\"[[author.image]]\" authorlink=\"[[author.socialLink]]\">\n              [[post.description]]\n            </simple-blog-card>\n          </template>\n        </dom-repeat>\n      </div>\n    </div>\n    <div class=\"contentcontainer-wrapper\">\n      <div id=\"contentcontainer\">\n        <site-active-title></site-active-title>\n        <h3 class=\"subtitle\" hidden$=\"[[!subtitle]]\">[[subtitle]]</h3>\n        <div id=\"slot\">\n          <slot></slot>\n        </div>\n      </div>\n      <site-query result=\"{{__followUpPosts}}\" limit=\"3\" start-index=\"[[activeManifestIndexCounter]]\"\n        sort='{\"created\": \"ASC\"}'></site-query>\n      <div class=\"simple-blog-card-wrapper\">\n        <dom-repeat items=\"[[__followUpPosts]]\" as=\"post\" mutable-data>\n          <template>\n            <simple-blog-card alt=\"[[post.metadata.fields.images.0.alt]]\" color=\"[[color]]\" title=\"[[post.title]]\" size=\"small\"\n              link=\"[[post.location]]\" image=\"[[_showImage(post.metadata.fields.images.0.src)]]\" author=\"[[author.name]]\"\n              placeholder=\"[[image]]\" timestamp=\"[[post.created]]\" readtime=\"[[post.metadata.readtime]]\"\n              authorimage=\"[[author.image]]\" authorlink=\"[[author.socialLink]]\">\n              [[post.description]]\n            </simple-blog-card>\n          </template>\n        </dom-repeat>\n      </div>\n      <div class=\"social-float hide-small\">\n        <ul>\n          <li>\n            <social-share-link button-style mode=\"icon-only\" message=\"[[shareMsg]]\" type=\"Twitter\">\n            </social-share-link>\n          </li>\n          <li>\n            <social-share-link button-style mode=\"icon-only\" message=\"[[shareMsg]]\" url=\"[[shareUrl]]\" type=\"LinkedIn\">\n            </social-share-link>\n          </li>\n          <li>\n            <social-share-link button-style mode=\"icon-only\" url=\"[[shareUrl]]\" message=\"[[shareMsg]]\" type=\"Facebook\">\n            </social-share-link>\n          </li>\n          <li>\n            <social-share-link button-style mode=\"icon-only\" message=\"[[shareMsg]]\" image=\"[[activeImage]]\" url=\"[[shareUrl]]\"\n              type=\"Pinterest\">\n            </social-share-link>\n          </li>\n        </ul>\n      </div>\n      <div class=\"annoy-user hide-small\">\n        <div class=\"annoy-inner\">\n          <iron-icon icon=\"[[icon]]\"></iron-icon>\n          <span>\n            Never miss a story from <strong>[[title]]</strong> use RSS today!\n          </span>\n          <span class=\"rss\">\n            <site-rss-button type=\"atom\"></site-rss-button>\n            <site-rss-button type=\"rss\"></site-rss-button>\n          </span>\n        </div>\n      </div>\n    </div>\n  </iron-pages>\n</div>`;\n  }\n\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {}\n;\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"haxor-slevin\";\n  }\n  static get properties() {\n    return Object.assign(super.properties, {\n      manifest: {\n        type: Object\n      },\n      color: {\n        type: String,\n        computed: \"_getColor(manifest)\"\n      },\n      selectedPage: {\n        type: Number,\n        reflectToAttribute: true,\n        value: 0\n      }\n    });\n  }\n  _getColor(manifest) {\n    if (manifest && manifest.metadata && manifest.metadata.hexCode) {\n      return manifest.metadata.hexCode;\n    }\n  }\n  constructor() {\n    super();\n    import(\"@polymer/paper-button/paper-button.js\");\n    import(\"@polymer/iron-image/iron-image.js\");\n    import(\"@lrnwebcomponents/haxcms-elements/lib/ui-components/active-item/site-active-title.js\");\n    import(\"@lrnwebcomponents/haxcms-elements/lib/ui-components/site/site-rss-button.js\");\n    import(\"@lrnwebcomponents/simple-blog-card/simple-blog-card.js\");\n    import(\"@polymer/app-layout/app-header/app-header.js\");\n    import(\"@polymer/app-layout/app-toolbar/app-toolbar.js\");\n    import(\"@lrnwebcomponents/social-share-link/social-share-link.js\");\n    import(\"@lrnwebcomponents/haxcms-elements/lib/ui-components/site/site-search.js\");\n    import(\"@lrnwebcomponents/haxcms-elements/lib/ui-components/layout/site-modal.js\");\n  }\n  _showImage(image) {\n    if (image) {\n      return image;\n    }\n    if (this.image) {\n      return this.image;\n    }\n    return false;\n  }\n  /**\n   * life cycle, element is afixed to the DOM\n   */\n  connectedCallback() {\n    super.connectedCallback();\n    this.__disposer = [];\n    autorun(reaction => {\n      let manifest = toJS(store.manifest);\n      this.title = manifest.title;\n      this.image = manifest.metadata.image;\n      this.icon = manifest.metadata.icon;\n      this.author = manifest.metadata.author;\n      this.__disposer.push(reaction);\n    });\n    autorun(reaction => {\n      this._noticeLocationChange(store.location);\n      this.__disposer.push(reaction);\n    });\n    autorun(reaction => {\n      this.activeManifestIndexCounter = toJS(store.activeManifestIndexCounter);\n      this.__disposer.push(reaction);\n    });\n    autorun(reaction => {\n      this.activeTitle = toJS(store.activeTitle);\n      this.shareUrl = document.location.href;\n      this.shareMsg = this.activeTitle + \" \" + this.shareUrl;\n      if (\n        store.activeItem &&\n        store.activeItem.metadata &&\n        store.activeItem.metadata.fields &&\n        store.activeItem.metadata.fields.subtitle\n      ) {\n        this.subtitle = store.activeItem.metadata.fields.subtitle;\n      } else {\n        this.subtitle = false;\n      }\n      // look for image on the post and make it the pin share\n      if (\n        store.activeItem &&\n        store.activeItem.metadata &&\n        store.activeItem.metadata.fields &&\n        store.activeItem.metadata.fields.images &&\n        store.activeItem.metadata.fields.images[0] &&\n        store.activeItem.metadata.fields.images[0].src\n      ) {\n        this.activeImage = store.activeItem.metadata.fields.images[0].src;\n      }\n      this.__disposer.push(reaction);\n    });\n  }\n  /**\n   * Listen for router location changes and select page to match\n   */\n  _noticeLocationChange(location) {\n    if (!location || typeof location.route === \"undefined\") return;\n    const name = location.route.name;\n    if (name === \"home\" || name === \"404\") {\n      this.selectedPage = 0;\n    } else {\n      window.scrollTo({\n        top: 0,\n        left: 0\n      });\n      this.selectedPage = 1;\n    }\n    setTimeout(() => {\n      var evt = document.createEvent(\"UIEvents\");\n      evt.initUIEvent(\"resize\", true, false, window, 0);\n      window.dispatchEvent(evt);\n    }, 50);\n  }\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  disconnectedCallback() {\n    for (var i in this.__disposer) {\n      this.__disposer[i].dispose();\n    }\n    super.disconnectedCallback();\n  }\n  /**\n   * Manage the back button to get to the home page of items\n   */\n  _goBack(e) {\n    window.history.pushState(null, null, store.location.baseUrl);\n    window.dispatchEvent(new PopStateEvent(\"popstate\"));\n    // should help account for starting on a page where popstate isn't set\n    // and also generate data model mirroring\n    window.scrollTo({\n      top: 0,\n      left: 0\n    });\n    const evt = new CustomEvent(\"json-outline-schema-active-item-changed\", {\n      bubbles: true,\n      cancelable: true,\n      detail: {}\n    });\n    this.dispatchEvent(evt);\n    this.selectedPage = 0;\n  }\n}\nwindow.customElements.define(HaxorSlevin.tag, HaxorSlevin);\nexport { HaxorSlevin };\n"],"names":["HaxorSlevin","HAXCMSTheme","PolymerElement","manifest","metadata","hexCode","html","Object","assign","type","color","String","computed","selectedPage","Number","reflectToAttribute","value","image","this","__disposer","autorun","reaction","toJS","store","_this2","title","icon","author","push","_noticeLocationChange","location","activeManifestIndexCounter","activeTitle","shareUrl","document","href","shareMsg","activeItem","fields","subtitle","images","src","activeImage","route","name","window","scrollTo","top","left","setTimeout","evt","createEvent","initUIEvent","dispatchEvent","i","dispose","e","history","pushState","baseUrl","PopStateEvent","CustomEvent","bubbles","cancelable","detail","customElements","define","tag"],"mappings":"ksWAyBMA,8KA4XK,gDACA,4CACA,+FACA,sFACA,iEACA,uDACA,yDACA,mEACA,kFACA,0TArYeC,cAAYC,wDAqX1BC,MACJA,GAAYA,EAASC,UAAYD,EAASC,SAASC,eAC9CF,EAASC,SAASC,kDAnXpBC,sDAkWAC,OAAOC,iCAAyB,CACrCL,SAAU,CACRM,KAAMF,QAERG,MAAO,CACLD,KAAME,OACNC,SAAU,uBAEZC,aAAc,CACZJ,KAAMK,OACNC,oBAAoB,EACpBC,MAAO,uCAdJ,yDAoCEC,UACLA,KAGAC,KAAKD,OACAC,KAAKD,wHASTE,WAAa,GAClBC,UAAQ,SAAAC,OACFlB,EAAWmB,OAAKC,QAAMpB,UAC1BqB,EAAKC,MAAQtB,EAASsB,MACtBD,EAAKP,MAAQd,EAASC,SAASa,MAC/BO,EAAKE,KAAOvB,EAASC,SAASsB,KAC9BF,EAAKG,OAASxB,EAASC,SAASuB,OAChCH,EAAKL,WAAWS,KAAKP,KAEvBD,UAAQ,SAAAC,GACNG,EAAKK,sBAAsBN,QAAMO,UACjCN,EAAKL,WAAWS,KAAKP,KAEvBD,UAAQ,SAAAC,GACNG,EAAKO,2BAA6BT,OAAKC,QAAMQ,4BAC7CP,EAAKL,WAAWS,KAAKP,KAEvBD,UAAQ,SAAAC,GACNG,EAAKQ,YAAcV,OAAKC,QAAMS,aAC9BR,EAAKS,SAAWC,SAASJ,SAASK,KAClCX,EAAKY,SAAWZ,EAAKQ,YAAc,IAAMR,EAAKS,SAE5CV,QAAMc,YACNd,QAAMc,WAAWjC,UACjBmB,QAAMc,WAAWjC,SAASkC,QAC1Bf,QAAMc,WAAWjC,SAASkC,OAAOC,SAEjCf,EAAKe,SAAWhB,QAAMc,WAAWjC,SAASkC,OAAOC,SAEjDf,EAAKe,UAAW,EAIhBhB,QAAMc,YACNd,QAAMc,WAAWjC,UACjBmB,QAAMc,WAAWjC,SAASkC,QAC1Bf,QAAMc,WAAWjC,SAASkC,OAAOE,QACjCjB,QAAMc,WAAWjC,SAASkC,OAAOE,OAAO,IACxCjB,QAAMc,WAAWjC,SAASkC,OAAOE,OAAO,GAAGC,MAE3CjB,EAAKkB,YAAcnB,QAAMc,WAAWjC,SAASkC,OAAOE,OAAO,GAAGC,KAEhEjB,EAAKL,WAAWS,KAAKP,mDAMHS,MACfA,QAAsC,IAAnBA,EAASa,WAC3BC,EAAOd,EAASa,MAAMC,KACf,SAATA,GAA4B,QAATA,OAChB/B,aAAe,GAEpBgC,OAAOC,SAAS,CACdC,IAAK,EACLC,KAAM,SAEHnC,aAAe,GAEtBoC,WAAW,eACLC,EAAMhB,SAASiB,YAAY,YAC/BD,EAAIE,YAAY,UAAU,GAAM,EAAOP,OAAQ,GAC/CA,OAAOQ,cAAcH,IACpB,wDAME,IAAII,KAAKpC,KAAKC,gBACZA,WAAWmC,GAAGC,mGAOfC,GACNX,OAAOY,QAAQC,UAAU,KAAM,KAAMnC,QAAMO,SAAS6B,SACpDd,OAAOQ,cAAc,IAAIO,cAAc,aAGvCf,OAAOC,SAAS,CACdC,IAAK,EACLC,KAAM,QAEFE,EAAM,IAAIW,YAAY,0CAA2C,CACrEC,SAAS,EACTC,YAAY,EACZC,OAAQ,UAELX,cAAcH,QACdrC,aAAe,WAGxBgC,OAAOoB,eAAeC,OAAOlE,EAAYmE,IAAKnE"}
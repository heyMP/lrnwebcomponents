{"version":3,"file":"dl-behavior.umd.js","sources":["dl-behavior.umd.js"],"sourcesContent":["import { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\n\nexport const MtzFileDownloadBehaviors = function(SuperClass) {\n  return class extends SuperClass {\n    static get properties() {\n      if (super.properties) {\n        return Object.assign(\n          {\n            fileTypes: {\n              type: Object,\n              value() {\n                return {\n                  CSV: \"text/csv\",\n                  JSON: \"text/json\",\n                  PDF: \"application/pdf\",\n                  TXT: \"text/plain\"\n                };\n              }\n            }\n          },\n          super.properties\n        );\n      } else {\n        return {\n          fileTypes: {\n            type: Object,\n            value() {\n              return {\n                CSV: \"text/csv\",\n                JSON: \"text/json\",\n                PDF: \"application/pdf\",\n                TXT: \"text/plain\"\n              };\n            }\n          }\n        };\n      }\n    }\n    /**\n     * Converts the data to a blob then uses navigator to save blob if itâ€™s available, otherwise\n     * creates an <a> with [download] attribute then simulates a click.\n     * @param {String} data - data to encode.\n     * @param {String} type - type of file to generate (i.e, JSON or CSV).\n     * @param {String} [name = 'download'] - file name to save data under.\n     * @param {Boolean} [newTab = true] - If false, downloads uri in existing tab. Otherwise,\n     * downloads in new tab.\n     */\n    downloadFromData(data, type, name = \"download\", newTab = true) {\n      const mimeType = this.fileTypes[type.toUpperCase()];\n      const blob = new Blob([decodeURIComponent(encodeURI(data))], {\n        type: mimeType\n      });\n      const filename = name + \".\" + type.toLowerCase();\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\n        window.navigator.msSaveOrOpenBlob(blob, filename);\n      } else {\n        // Link elements have a download attribute which provides cross-platform\n        // download behavior supporting all but IE 11. This creates new link and then\n        // clicks it to initiate download.\n        const link = document.createElement(\"a\");\n        link.href = (window.URL || window.webkitURL).createObjectURL(blob);\n        link.download = filename;\n        link.target = newTab ? \"_blank\" : \"_self\";\n        dom(this.root).appendChild(link);\n        link.click();\n        dom(this.root).removeChild(link);\n      }\n    }\n\n    /**\n     * Opens a new tab at the URI so that download can be initiated from the page.\n     * @param {String} uri - The uri to open.\n     * @param {Boolean} [newTab = true] - If false, downloads uri in existing tab. Otherwise,\n     * downloads in new tab.\n     * @return {Boolean} Returns true.\n     */\n    downloadFromURI(uri, newTab = true) {\n      window.open(uri, newTab ? \"_blank\" : \"_self\");\n      return true; // NOTE: Returning true to prevent error in some browsers during download.\n    }\n  };\n};\n"],"names":["SuperClass","Object","assign","fileTypes","type","value","CSV","JSON","PDF","TXT","data","name","newTab","mimeType","this","toUpperCase","blob","Blob","decodeURIComponent","encodeURI","filename","toLowerCase","window","navigator","msSaveOrOpenBlob","link","document","createElement","href","URL","webkitURL","createObjectURL","download","target","dom","root","appendChild","click","removeChild","uri","open"],"mappings":"+sCAEwC,SAASA,waAC1BA,4EAGRC,OAAOC,OACZ,CACEC,UAAW,CACTC,KAAMH,OACNI,uBACS,CACLC,IAAK,WACLC,KAAM,YACNC,IAAK,kBACLC,IAAK,4CAQR,CACLN,UAAW,CACTC,KAAMH,OACNI,uBACS,CACLC,IAAK,WACLC,KAAM,YACNC,IAAK,kBACLC,IAAK,+DAgBAC,EAAMN,OAAMO,yDAAO,WAAYC,6DACxCC,EAAWC,KAAKX,UAAUC,EAAKW,eAC/BC,EAAO,IAAIC,KAAK,CAACC,mBAAmBC,UAAUT,KAAS,CAC3DN,KAAMS,IAEFO,EAAWT,EAAO,IAAMP,EAAKiB,iBAC/BC,OAAOC,WAAaD,OAAOC,UAAUC,iBACvCF,OAAOC,UAAUC,iBAAiBR,EAAMI,OACnC,KAICK,EAAOC,SAASC,cAAc,KACpCF,EAAKG,MAAQN,OAAOO,KAAOP,OAAOQ,WAAWC,gBAAgBf,GAC7DS,EAAKO,SAAWZ,EAChBK,EAAKQ,OAASrB,EAAS,SAAW,QAClCsB,MAAIpB,KAAKqB,MAAMC,YAAYX,GAC3BA,EAAKY,QACLH,MAAIpB,KAAKqB,MAAMG,YAAYb,4CAWfc,OAAK3B,oEACnBU,OAAOkB,KAAKD,EAAK3B,EAAS,SAAW,UAC9B"}
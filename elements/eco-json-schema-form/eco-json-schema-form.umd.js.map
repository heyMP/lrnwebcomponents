{"version":3,"file":"eco-json-schema-form.umd.js","sources":["lib/eco-json-schema-boolean.js","lib/eco-json-schema-enum.js","lib/eco-json-schema-input.js","lib/eco-json-schema-file.js","lib/eco-json-schema-array.js","lib/eco-json-schema-object.js","lib/eco-json-schema-wizard.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nclass EcoJsonSchemaBoolean extends PolymerElement {\n  static get tag() {\n    return \"eco-json-schema-boolean\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        paper-checkbox {\n          color: #737373;\n          padding: 2px;\n          display: block;\n          font-size: 16px;\n          white-space: normal;\n        }\n      </style>\n\n      <paper-checkbox\n        id=\"checkbox\"\n        class=\"flex\"\n        checked=\"{{value}}\"\n        invalid=\"[[error]]\"\n        >[[_label]]</paper-checkbox\n      >\n    `;\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: Boolean,\n        notify: true,\n        value: false\n      },\n      error: {\n        type: Boolean,\n        value: false\n      },\n      _label: {\n        type: String,\n        notify: true,\n        value: \"\"\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.$.checkbox;\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    if (schema.title) {\n      this._label = schema.title;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaBoolean.tag, EcoJsonSchemaBoolean);\nexport { EcoJsonSchemaBoolean };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport { IronValidatableBehavior } from \"@polymer/iron-validatable-behavior/iron-validatable-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\n\nclass EcoJsonSchemaEnum extends mixinBehaviors(\n  [IronValidatableBehavior],\n  PolymerElement\n) {\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        paper-input {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        paper-dropdown-menu {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n          --paper-dropdown-menu-button: {\n            padding: 2px;\n          }\n        }\n      </style>\n\n      <paper-dropdown-menu\n        id=\"dropdown\"\n        class=\"layout horizontal vertical\"\n        value=\"{{value}}\"\n        required=\"\"\n      >\n        <paper-dropdown-menu class=\"dropdown-content\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"0\">\n            <template is=\"dom-repeat\" items=\"[[_items]]\">\n              <paper-item class=\"flex\" label=\"[[item]]\">[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </paper-dropdown-menu>\n    `;\n  }\n  static get tag() {\n    return \"eco-json-schema-enum\";\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: String,\n        notify: true,\n        value: null\n      },\n      error: {\n        type: String,\n        observer: \"_errorChanged\",\n        value: null\n      },\n      _items: {\n        type: Object,\n        value() {\n          return {};\n        }\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.$.dropdown;\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    this._items = schema.enum.filter(function(item) {\n      return item !== null;\n    });\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  }\n  _errorChanged() {\n    if (this.error) {\n      this.$.dropdown.invalid = true;\n    } else {\n      this.$.dropdown.invalid = false;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaEnum.tag, EcoJsonSchemaEnum);\nexport { EcoJsonSchemaEnum };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-styles/typography.js\";\n/**\n`eco-json-schema-input` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-input\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaInput extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-input\";\n  }\n  static get template() {\n    return html`\n      <custom-style>\n        <style\n          is=\"custom-style\"\n          include=\"iron-flex iron-flex-alignment\"\n        ></style>\n      </custom-style>\n      <paper-input\n        id=\"input\"\n        class=\"flex\"\n        value=\"{{value}}\"\n        auto-validate\n      ></paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      language: {\n        value: \"en\"\n      },\n      resources: {\n        value() {\n          return {};\n        }\n      },\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: String,\n        notify: true,\n        value() {\n          return \"\";\n        }\n      },\n      error: {\n        type: String,\n        observer: \"_errorChanged\",\n        value: null\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.$.input;\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    if (this._isSchemaNumber(schema.type)) {\n      inputEl.type = \"number\";\n\n      if (schema.multipleOf) {\n        inputEl.step = schema.multipleOf;\n      }\n\n      if (!isNaN(schema.maximum)) {\n        if (schema.exclusiveMaximum) {\n          inputEl.max = schema.maximum - (schema.multipleOf || 1);\n        } else {\n          inputEl.max = schema.maximum;\n        }\n      }\n\n      if (!isNaN(schema.minimum)) {\n        if (schema.exclusiveMinimum) {\n          inputEl.min = schema.minimum + (schema.multipleOf || 1);\n        } else {\n          inputEl.min = schema.minimum;\n        }\n      }\n    }\n\n    if (this._isSchemaString(schema.type)) {\n      if (schema.format === \"date-time\") {\n        inputEl.type = \"datetime-local\";\n        inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n      } else if (schema.format === \"date\") {\n        inputEl.type = \"date\";\n      } else if (schema.format === \"email\") {\n        inputEl.type = \"email\";\n      } else if (schema.format === \"hostname\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv4\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv6\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"uri\") {\n        inputEl.type = \"url\";\n      } else {\n        inputEl.type = \"text\";\n      }\n\n      /*\n        if (schema.maxLength || schema.minLength) {\n          inputEl.charCounter = true;\n        }\n       */\n\n      if (schema.maxLength) {\n        inputEl.maxlength = schema.maxLength;\n      }\n\n      if (schema.minLength) {\n        inputEl.minlength = schema.minLength;\n      }\n\n      if (schema.pattern) {\n        inputEl.pattern = schema.pattern;\n      }\n    }\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  }\n  _errorChanged() {\n    if (this.error) {\n      this.$.input.errorMessage = this.error;\n      this.$.input.invalid = true;\n    } else {\n      this.$.input.invalid = false;\n      this.$.input.errorMessage = null;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaInput.tag, EcoJsonSchemaInput);\nexport { EcoJsonSchemaInput };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { microTask } from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\n/**\n`eco-json-schema-file` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-file\n* @demo demo/index.html\n*/\n\nclass EcoJsonSchemaFile extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-file\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        :host {\n          display: inline-block;\n        }\n\n        .enabled {\n          border: 1px dashed #555;\n          @apply --file-upload-upload-border-enabled;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n          @apply --file-upload-upload-border-hover;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 20px;\n          max-height: 300px;\n          overflow-y: auto;\n          display: inline-block;\n          @apply --file-upload-upload-border;\n        }\n\n        #dropArea {\n          text-align: center;\n          @apply --file-upload-drop-area;\n        }\n\n        paper-button#button {\n          margin-bottom: 20px;\n          @apply --file-upload-button;\n        }\n\n        .file {\n          padding: 10px 0px;\n          @apply --file-upload-file;\n        }\n\n        .commands {\n          float: right;\n          @apply --file-upload-commands;\n        }\n\n        .commands iron-icon:not([icon=\"check-circle\"]) {\n          cursor: pointer;\n          opacity: 0.9;\n          @apply --file-upload-commands-faded;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n          @apply --file-upload-commands-hovered;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin-top: 2px;\n          @apply --file-upload-error;\n        }\n\n        .progress-bar {\n          margin-top: 2px;\n        }\n\n        paper-progress {\n          --paper-progress-active-color: #03a9f4;\n        }\n\n        paper-progress[error] {\n          --paper-progress-active-color: #f40303;\n        }\n      </style>\n\n      <div class=\"layout horizontal nowrap\">\n        <div>\n          <paper-button\n            id=\"button\"\n            on-click=\"_fileClick\"\n            alt=\"{{paperButtonAlt}}\"\n            raised=\"\"\n          >\n            <iron-icon icon=\"editor:attach-file\"></iron-icon\n            >{{paperButtonTitle}}</paper-button\n          >\n          <div id=\"UploadBorder\">\n            <div id=\"dropArea\" hidden\\$=\"{{!_shownDropText}}\">{{dropText}}</div>\n            <template is=\"dom-repeat\" items=\"{{files}}\">\n              <div class=\"file\">\n                <div class=\"name\">\n                  <span>{{item.name}}</span>\n                  <div class=\"commands\">\n                    <iron-icon\n                      icon=\"autorenew\"\n                      title=\"{{retryText}}\"\n                      on-click=\"_retryUpload\"\n                      hidden\\$=\"{{!item.error}}\"\n                    ></iron-icon>\n                    <iron-icon\n                      icon=\"cancel\"\n                      title=\"{{removeText}}\"\n                      on-click=\"_cancelUpload\"\n                      hidden\\$=\"{{item.complete}}\"\n                    ></iron-icon>\n                    <iron-icon\n                      icon=\"check-circle\"\n                      title=\"{{successText}}\"\n                      hidden\\$=\"{{!item.complete}}\"\n                    ></iron-icon>\n                  </div>\n                </div>\n                <div class=\"error\" hidden\\$=\"{{!item.error}}\">\n                  {{errorText}}\n                </div>\n              </div>\n            </template>\n          </div>\n        </div>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          on-change=\"_fileChange\"\n          hidden=\"\"\n          multiple=\"{{multi}}\"\n          accept=\"{{accept}}\"\n        />\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      language: {\n        value: \"en\",\n        notify: true\n      },\n      resources: {\n        value() {\n          return {};\n        },\n        notify: true\n      },\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        },\n        observer: \"_valueChanged\"\n      },\n      /**\n      error: {\n        type: String,\n        observer: '_errorChanged',\n        value: null\n      },\n      */\n\n      /**\n       * `target` is the target url to upload the files to.\n       * Additionally by adding '<name>' in your url, it will be replaced by\n       * the file name.\n       */\n      target: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `accept` is the set of comma separated file extensions or mime types\n       * to filter as accepted.\n       */\n      accept: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `droppable` indicates whether or not to allow file drop.\n       */\n      droppable: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `dropText` is the  text to display in the file drop area.\n       */\n      dropText: {\n        type: String,\n        value: \"Drop Files Here\"\n      },\n\n      /**\n       * `multi` indicates whether or not to allow multiple files to be uploaded.\n       */\n      multi: {\n        type: Boolean,\n        value: true\n      },\n\n      /**\n       * `files` is the list of files to be uploaded\n       */\n      files: {\n        type: Array,\n        notify: true,\n        value() {\n          return [];\n        }\n      },\n\n      /**\n       * `raised` indicates whether or not the button should be raised\n       */\n      raised: {\n        type: Boolean,\n        value: true\n      },\n\n      /**\n       * `noink` indicates that the button should not have an ink effect\n       */\n      noink: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `headers` is a key value map of header names and values\n       */\n      headers: {\n        type: Object,\n        value: {}\n      },\n\n      /**\n       * `retryText` is the text for the tooltip to retry an upload\n       */\n      retryText: {\n        type: String,\n        value: \"Retry Upload\"\n      },\n\n      /**\n       * `removeText` is the text for the tooltip to remove an upload\n       */\n      removeText: {\n        type: String,\n        value: \"Remove\"\n      },\n\n      /**\n       * `successText` is the text for the tooltip of a successful upload\n       */\n      successText: {\n        type: String,\n        value: \"Success\"\n      },\n\n      /**\n       * `errorText` is the text to display for a failed upload\n       */\n      errorText: {\n        type: String,\n        value: \"Error uploading file...\"\n      },\n\n      /**\n       * `_shownDropText` indicates whether or not the drop text should be shown\n       */\n      _shownDropText: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `additional` object of key-pair values to send additional values along with file.\n       */\n      additional: {\n        type: Object,\n        value: {}\n      },\n\n      /**\n       * `fileDataName` is the name for the file data in the `formData` object.\n       */\n      fileDataName: {\n        type: String,\n        value: \"file\"\n      },\n\n      /**\n       * `paperButtonAlt` allows changing the alt property on the paper button\n       */\n      paperButtonAlt: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `paperButtonTitle` allows changing the title property on the paper button\n       */\n      paperButtonTitle: {\n        type: String,\n        value: \"\"\n      }\n    };\n  }\n  /**\n   * Clears the list of files\n   */\n  clear() {\n    this.set(\"files\", []);\n    this.$.fileInput.value = \"\";\n    this._showDropText();\n  }\n\n  ready() {\n    super.ready();\n\n    if (this.raised) {\n      this.toggleAttribute(\"raised\", true, this.$.button);\n    }\n    if (this.noink) {\n      this.toggleAttribute(\"noink\", true, this.$.button);\n    }\n    if (this.droppable) {\n      this._showDropText();\n      this.setupDrop();\n    }\n  }\n\n  /**\n   * A function to set up a drop area for drag-and-drop file uploads\n   */\n  setupDrop() {\n    var uploadBorder = this.$.UploadBorder;\n    this.toggleClass(\"enabled\", true, uploadBorder);\n\n    this.ondragover = function(e) {\n      e.stopPropagation();\n      this.toggleClass(\"hover\", true, uploadBorder);\n\n      // Workaround for allowgin drop from Chome's download footer on OSX\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=234931\n      var effect = e.dataTransfer && e.dataTransfer.dropEffect;\n      var effectAllowed = e.dataTransfer && e.dataTransfer.effectAllowed;\n      if (effect === \"none\" && effectAllowed !== \"none\") {\n        e.dataTransfer.dropEffect = effectAllowed === \"move\" ? \"move\" : \"copy\";\n      }\n      // end of workaround\n\n      return false;\n    };\n\n    this.ondragleave = function() {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      return false;\n    };\n\n    this.ondrop = function(event) {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      event.preventDefault();\n\n      // Check if multiple upload is allowed\n      if (!this.multi && this.files.length !== 0) {\n        return;\n      }\n\n      var length = event.dataTransfer.files.length;\n      for (var i = 0; i < length; i++) {\n        var file = event.dataTransfer.files[i];\n        //if (this.value.indexOf(window.btoa(unescape(encodeURIComponent(file.name)))) >= 0 ) {\n        //  continue;\n        //}\n        // Check if filetype is accepted\n        var mimeType =\n          file.type !== \"\" ? file.type.match(/^[^\\/]*\\//)[0] : null;\n        var fileType = file.name.match(/\\.[^\\.]*$/)[0];\n        if (\n          this.accept !== \"\" &&\n          !(\n            this.accept.indexOf(mimeType) > -1 ||\n            this.accept.indexOf(fileType) > -1\n          )\n        ) {\n          continue;\n        }\n\n        file.progress = 0;\n        file.error = false;\n        file.complete = false;\n        this.push(\"files\", file);\n        this.uploadFile(file);\n      }\n    };\n  }\n\n  /**\n   * Clicks the invisible file input\n   */\n  _fileClick() {\n    var elem = this.$.fileInput;\n    if (elem && document.createEvent) {\n      // sanity check\n      var evt = document.createEvent(\"MouseEvents\");\n      evt.initEvent(\"click\", true, false);\n      elem.dispatchEvent(evt);\n    }\n  }\n\n  /**\n   * Called whenever the list of selected files changes\n   *\n   * @param {object} e An event object\n   */\n  _fileChange(e) {\n    var length = e.target.files.length;\n    for (var i = 0; i < length; i++) {\n      var file = e.target.files[i];\n      file.progress = 0;\n      file.error = false;\n      file.complete = false;\n      this.push(\"files\", file);\n      if (!this.multi && this.files.length !== 0) {\n        this.set(\"files\", []);\n        this.set(\"value\", {});\n      }\n      this.uploadFile(file);\n    }\n  }\n\n  /**\n   * Cancels the file upload for a specific file\n   *\n   * @param {object} file An element of the files array\n   */\n  cancel(file) {\n    if (file) {\n      if (file.xhr) {\n        file.xhr.abort();\n      }\n      this.splice(\"files\", this.files.indexOf(file), 1);\n      this._showDropText();\n    }\n  }\n\n  /**\n   * Cancels the file upload\n   *\n   * @param {object} e An event object\n   */\n  _cancelUpload(e) {\n    this.cancel(e.model.__data__.item);\n  }\n\n  /**\n   * Retries to upload the file\n   *\n   * @param {object} e An event object\n   */\n  _retryUpload(e) {\n    e.model.set(\"item.error\", false);\n    e.model.set(\"item.progress\", 0);\n    // The async helps give visual feedback of a retry occurring, even though it's less efficient.\n    var self = this;\n    microTask.run(() => {\n      self.uploadFile(e.model.__data__.item);\n    });\n  }\n\n  /**\n   * Whether or not to display the drop text\n   */\n  _showDropText() {\n    this.set(\"_shownDropText\", !this.files.length && this.droppable);\n  }\n\n  /**\n   * Uploads a file\n   *\n   * @param {object} file An element of the files array\n   */\n  uploadFile(file) {\n    if (!file) {\n      return;\n    }\n    this.dispatchEvent(\n      new CustomEvent(\"before-upload\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: true\n      })\n    );\n    this._showDropText();\n    var prefix = \"files.\" + this.files.indexOf(file);\n    var self = this;\n\n    var reader = new FileReader();\n\n    reader.addEventListener(\n      \"load\",\n      function() {\n        var r = reader.result;\n        //self.push('value', {\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //self.value.push({\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //console.log('value.'+self.files.indexOf(file));\n        self.set(\n          \"value.\" +\n            self.attributes.name.value +\n            \".\" +\n            self.files.indexOf(file),\n          r\n        );\n        //self.notifyPath('value');\n      },\n      false\n    );\n\n    if (!self.value.hasOwnProperty(self.attributes.name.value)) {\n      this.set(\"value.\" + self.attributes.name.value, {});\n    }\n    reader.readAsDataURL(file);\n  }\n  _valueChanged() {\n    console.log(\"this.value: \" + JSON.stringify(this.value));\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    /*\n    var inputEl = this.$.fileInput;\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    //inputEl.type = 'file';\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n    */\n\n    /*\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n    */\n  }\n  /*\n  _errorChanged() {\n    if (this.error) {\n      this.$.fileInput.errorMessage = this.error;\n      this.$.fileInput.invalid = true;\n    } else {\n      this.$.fileInput.invalid = false;\n      this.$.fileInput.errorMessage = null;\n    }\n  },\n  */\n  _isSchemaValue(type) {\n    return this._isSchemaFile(type);\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n  stringify(s) {\n    return JSON.stringify(s);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaFile.tag, EcoJsonSchemaFile);\nexport { EcoJsonSchemaFile };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"paper-collapse-item/paper-collapse-item.js\";\nimport \"paper-collapse-item/paper-collapse-group.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-input.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-file.js\";\n/**\n`eco-json-schema-array` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-array\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaArray extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-array\";\n  }\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          paper-input {\n            padding: 2px;\n\n            --paper-input-container-label: {\n              white-space: normal;\n              position: static;\n              font-size: 22px;\n              color: #212121;\n            }\n          }\n\n          paper-collapse-item {\n            --paper-collapse-item-header: {\n              font-weight: bold;\n              padding: 8px 0 0 8px;\n            }\n          }\n\n          #form {\n            border: 1px solid #aaaaaa;\n          }\n\n          #form div:nth-child(odd) {\n            background-color: #f2f2f2;\n            padding: 4px;\n          }\n\n          #form div:nth-child(even) {\n            background-color: #e2e2e2;\n            border-top: 1px solid #aaaaaa;\n            border-bottom: 1px solid #aaaaaa;\n            padding: 4px;\n          }\n\n          #form div:focus,\n          #form div:hover,\n          #form div:active {\n            background-color: #ffffff !important;\n          }\n\n          paper-icon-button {\n            float: right;\n            border-radius: 50%;\n          }\n\n          .array-add {\n            color: #34e79a;\n            background-color: #f8f8f8;\n          }\n\n          .array-remove-element {\n            color: #f44336;\n            background-color: #f8f8f8;\n          }\n\n          .label {\n            @apply --paper-input-container-label;\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n\n          :host {\n            display: block;\n          }\n          .label {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n            @apply --paper-input-container-label;\n          }\n        </style>\n      </custom-style>\n      <div class=\"horizontal layout\">\n        <div class=\"flex\" hidden\\$=\"[[!label]]\">[[label]]</div>\n        <paper-icon-button\n          id=\"addarray\"\n          title=\"Add another item\"\n          class=\"array-add\"\n          icon=\"add\"\n          on-click=\"_onAddItem\"\n          role=\"button\"\n          aria-label=\"Add another item\"\n        ></paper-icon-button>\n      </div>\n\n      <paper-collapse-group id=\"form\" class=\"vertical flex layout\"\n        ><slot></slot\n      ></paper-collapse-group>\n    `;\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Array,\n        notify: true,\n        value() {\n          return [];\n        },\n        observer: \"_valueChanged\"\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      _schemaArrayItems: {\n        type: Array,\n        notify: true\n      }\n    };\n  }\n  static get observers() {\n    return [\"_schemaArraySplicesChanged(_schemaArrayItems.splices)\"];\n  }\n  /**\n   * Notice values have changed and rebuild the form\n   * to match (potentially).\n   */\n  _valueChanged(newValue, oldValue) {\n    if (\n      newValue !== oldValue &&\n      typeof newValue !== typeof undefined &&\n      typeof this.schema !== typeof undefined\n    ) {\n      setTimeout(() => {\n        this._buildSchemaArrayItems();\n        // wipe schema array and go from there\n        // this only fires when the element initially builds\n        for (var i in newValue) {\n          this._onAddItemWithValue(newValue[i], parseInt(i));\n        }\n      }, 325);\n    }\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  _buildSchemaArrayItems() {\n    this.set(\"_schemaArrayItems\", []);\n  }\n  _setValue() {\n    let newValue = this._schemaArrayItems.map(function(item) {\n      return item.value;\n    });\n    this.set(\"value\", []);\n    this.set(\"value\", newValue);\n    this.notifyPath(\"value.*\");\n  }\n  _schemaArraySplicesChanged(detail) {\n    if (!detail) {\n      return false;\n    }\n\n    if (detail.keySplices) {\n      console.warn(\"Got keySplices, don't know what to do with them!\");\n    }\n\n    detail.indexSplices.forEach(splice => {\n      var args = [\"value\", splice.index, splice.removed.length];\n\n      if (splice.removed && splice.removed.length) {\n        for (\n          var i = splice.index, ii = splice.index + splice.removed.length;\n          i < ii;\n          i++\n        ) {\n          this._removeArrayEl(this.children[i]);\n        }\n      }\n\n      if (splice.addedCount) {\n        for (\n          var i = splice.index, ii = splice.index + splice.addedCount;\n          i < ii;\n          i++\n        ) {\n          var item = splice.object[i];\n          var componentEl = this.create(item.component.name, {\n            label: item.label,\n            schema: item.schema,\n            schemaArrayItem: item\n          });\n          var containerEl = this.create(\"paper-collapse-item\", {\n            header: \"Item \" + (i + 1)\n          });\n          var buttonEl = this.create(\"paper-icon-button\", {\n            icon: \"remove\",\n            title: \"Remove item\"\n          });\n          this.listen(buttonEl, \"click\", \"_onRemoveItem\");\n          buttonEl.classList.add(\"array-remove-element\");\n          componentEl.classList.add(\"flex\", \"horizontal\", \"layout\");\n\n          dom(containerEl).appendChild(componentEl);\n          dom(containerEl).appendChild(buttonEl);\n\n          var beforeEl = this.children[i];\n\n          if (beforeEl) {\n            dom(this).insertBefore(containerEl, beforeEl);\n          } else {\n            dom(this).appendChild(containerEl);\n          }\n\n          this.listen(\n            componentEl,\n            item.component.valueProperty\n              .replace(/([A-Z])/g, \"-$1\")\n              .toLowerCase() + \"-changed\",\n            \"_schemaArrayItemChanged\"\n          );\n          args.push(this._deepClone(componentEl[item.component.valueProperty]));\n        }\n      }\n      this.splice.apply(this, args);\n    });\n  }\n  _schemaArrayItemChanged(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var item = event.target.schemaArrayItem;\n    var index = this._schemaArrayItems.indexOf(item);\n    var path = [\"value\", index];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      path = path.concat(detail.path.split(\".\").slice(1, -1));\n\n      if (detail.value.keySplices) {\n        console.warn(\"Got keySplices, don't know what to do with them!\");\n      }\n\n      detail.value.indexSplices.forEach(splice => {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (\n            var i = splice.index, ii = splice.index + splice.addedCount;\n            i < ii;\n            i++\n          ) {\n            args.push(this._deepClone(splice.object[i]));\n          }\n        }\n        this.splice.apply(this, args);\n      });\n    } else if (detail.path) {\n      path = path.concat(detail.path.split(\".\").slice(1));\n      this.set(path, this._deepClone(detail.value));\n      this.notifyPath(path);\n    } else {\n      this.splice(\"value\", index, 1, this._deepClone(detail.value));\n      this.notifyPath(\"value.1\");\n    }\n  }\n  _removeArrayEl(el) {\n    var polyEl = dom(el);\n    if (typeof polyEl.childNodes[0] !== typeof undefined) {\n      this.unlisten(\n        polyEl.childNodes[0],\n        polyEl.firstChild.schemaArrayItem.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaArrayItemChanged\"\n      );\n      if (typeof polyEl.childNodes[1] !== typeof undefined) {\n        this.unlisten(polyEl.childNodes[1], \"click\", \"_onRemoveItem\");\n      }\n    }\n    el.schemaArrayItem = null;\n    dom(this).removeChild(el);\n  }\n  _clearForm() {\n    var formEl = dom(this);\n    while (formEl.firstChild) {\n      this._removeArrayEl(formEl.firstChild);\n    }\n  }\n  _schemaChanged() {\n    this._clearForm();\n    this._buildSchemaArrayItems();\n  }\n  _errorChanged() {\n    dom(this).childNodes.forEach((rowEl, idx) => {\n      if (this.error && this.error[idx]) {\n        dom(rowEl).childNodes[0].error = this.error[idx];\n      } else {\n        dom(rowEl).childNodes[0].error = null;\n      }\n    });\n  }\n  _onAddItemWithValue(values, pointer) {\n    var schema = this.schema.items;\n    var i = 0;\n    // try to set values if we have them\n    if (typeof values !== typeof undefined) {\n      for (i in values) {\n        if (typeof schema.properties[i] !== typeof undefined) {\n          schema.properties[i].value = values[i];\n        }\n      }\n    }\n    var item = {\n      schema: schema,\n      component: schema.component || {}\n    };\n    if (schema.title) {\n      item.label = schema.title;\n    }\n\n    if (!item.component.valueProperty) {\n      item.component.valueProperty = \"value\";\n    }\n\n    if (!item.component.name) {\n      if (this._isSchemaEnum(schema)) {\n        item.component.name = \"eco-json-schema-enum\";\n      } else if (this._isSchemaBoolean(schema.type)) {\n        item.component.name = \"eco-json-schema-boolean\";\n      } else if (this._isSchemaFile(schema.type)) {\n        item.component.name = \"eco-json-schema-file\";\n      } else if (this._isSchemaValue(schema.type)) {\n        item.component.name = \"eco-json-schema-input\";\n      } else if (this._isSchemaObject(schema.type)) {\n        item.component.name = \"eco-json-schema-object\";\n      } else if (this._isSchemaArray(schema.type)) {\n        item.component.name = \"eco-json-schema-array\";\n      } else {\n        return console.error(\"Unknown item type %s\", schema.type);\n      }\n    }\n    var componentEl = this.create(item.component.name, {\n      label: item.label,\n      schema: item.schema,\n      schemaArrayItem: item\n    });\n    var containerEl = this.create(\"paper-collapse-item\", {\n      header: \"Item \" + (this.children.length + 1)\n    });\n    var buttonEl = this.create(\"paper-icon-button\", {\n      icon: \"remove\",\n      title: \"Remove item\"\n    });\n    this.listen(buttonEl, \"click\", \"_onRemoveItem\");\n    buttonEl.classList.add(\"array-remove-element\");\n    componentEl.classList.add(\"flex\", \"horizontal\", \"layout\");\n\n    dom(containerEl).appendChild(componentEl);\n    dom(containerEl).appendChild(buttonEl);\n\n    var beforeEl = this.children[this.children.length];\n\n    if (beforeEl) {\n      dom(this).insertBefore(containerEl, beforeEl);\n    } else {\n      dom(this).appendChild(containerEl);\n    }\n    this.listen(\n      componentEl,\n      item.component.valueProperty.replace(/([A-Z])/g, \"-$1\").toLowerCase() +\n        \"-changed\",\n      \"_schemaArrayItemChanged\"\n    );\n    // this will add it to the array but not force a splice mutation\n    this._schemaArrayItems.push(item);\n  }\n  _onAddItem(e) {\n    const schema = this.schema.items;\n    var item = {\n      label: schema.title,\n      schema: schema,\n      component: schema.component || {}\n    };\n\n    if (!item.component.valueProperty) {\n      item.component.valueProperty = \"value\";\n    }\n    for (var i in item.schema.properties) {\n      item.schema.properties[i].value = null;\n    }\n\n    if (!item.component.name) {\n      if (this._isSchemaEnum(schema)) {\n        item.component.name = \"eco-json-schema-enum\";\n      } else if (this._isSchemaBoolean(schema.type)) {\n        item.component.name = \"eco-json-schema-boolean\";\n      } else if (this._isSchemaFile(schema.type)) {\n        item.component.name = \"eco-json-schema-file\";\n      } else if (this._isSchemaValue(schema.type)) {\n        item.component.name = \"eco-json-schema-input\";\n      } else if (this._isSchemaObject(schema.type)) {\n        item.component.name = \"eco-json-schema-object\";\n      } else if (this._isSchemaArray(schema.type)) {\n        item.component.name = \"eco-json-schema-array\";\n      } else {\n        return console.error(\"Unknown item type %s\", schema.type);\n      }\n    }\n    this.push(\"_schemaArrayItems\", item);\n  }\n  _onRemoveItem(e) {\n    var item = dom(e).localTarget.previousSibling.schemaArrayItem;\n    var index = this._schemaArrayItems.indexOf(item);\n    this.splice(\"_schemaArrayItems\", index, 1);\n  }\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaArray.tag, EcoJsonSchemaArray);\nexport { EcoJsonSchemaArray };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/polymer/lib/elements/dom-if.js\";\nimport { FlattenedNodesObserver } from \"@polymer/polymer/lib/utils/flattened-nodes-observer.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n/**\n`eco-json-schema-object` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-object schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-object>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-object\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaObject extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-object\";\n  }\n\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          div.layout {\n            height: auto;\n          }\n          #form {\n            display: block;\n            @apply --eco-json-schema-object-form;\n            @apply --layout-vertical;\n            @apply --layout-wrap;\n          }\n          #form ::slotted(paper-input) {\n            --paper-input-container-shared-input-style: {\n              border: none !important;\n              width: 100% !important;\n              background-color: transparent !important;\n            }\n          }\n        </style>\n      </custom-style>\n\n      <template is=\"dom-if\" if=\"{{!wizard}}\">\n        <div class=\"header\" hidden\\$=\"[[!label]]\">[[label]]</div>\n      </template>\n      <div class=\"layout vertical flex start-justified\">\n        <div\n          id=\"form\"\n          class=\"layout horizontal flex start-justified\"\n          aria-live=\"polite\"\n        >\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      language: {\n        value: \"en\"\n      },\n      resources: {\n        value() {\n          return {};\n        }\n      },\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        }\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      wizard: {\n        type: Boolean,\n        notify: true\n      },\n      /**\n       * automatically set focus on the first field if that field has autofocus\n       */\n      autofocus: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  _buildSchemaProperties() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      key => {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n        if (!property.component.slot) {\n          property.component.slot = \"\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = \"\";\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = false;\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = {};\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = \"\";\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = {};\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = [];\n          }\n          property.value = schema.value;\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n        return property;\n      }\n    );\n  }\n  _schemaPropertyChanged(event, detail) {\n    if (detail) {\n      if (detail.path && /\\.length$/.test(detail.path)) {\n        return;\n      }\n      var ctx = this;\n      var property = event.target.schemaProperty;\n      var path = [\"value\", property.property];\n\n      if (detail.path && /\\.splices$/.test(detail.path)) {\n        var parts = detail.path.split(\".\").slice(1, -1);\n        while (parts.length) {\n          path.push(parts.shift());\n          if (property.keyMap && property.keyMap[path.join(\".\")]) {\n            path = property.keyMap[path.join(\".\")].split(\".\");\n          }\n        }\n\n        if (detail.value.keySplices) {\n          if (property.keyMap) {\n            detail.value.keySplices.forEach(splice => {\n              splice.removed.forEach(k => {\n                delete property.keyMap[path.concat([k]).join(\".\")];\n              });\n            });\n          }\n        }\n\n        if (detail.value) {\n          detail.value.indexSplices.forEach(splice => {\n            var args = [path.join(\".\"), splice.index, splice.removed.length];\n            if (splice.addedCount) {\n              for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n                if (splice.addedKeys && splice.addedKeys[i]) {\n                  property.keyMap = property.keyMap || {};\n                  property.keyMap[\n                    path.concat([splice.addedKeys[i]]).join(\".\")\n                  ] = path.concat([i + splice.index]).join(\".\");\n                }\n                args.push(ctx._deepClone(splice.object[i + splice.index]));\n              }\n            }\n            ctx.splice.apply(ctx, args);\n          });\n        }\n      } else if (detail.path) {\n        var parts = detail.path.split(\".\").slice(1);\n        var v = this.value;\n        if (!v.hasOwnProperty(property.property)) {\n          this.set(\"value.\" + property.property, {});\n          this.notifyPath(\"value.\" + property.property);\n        }\n        while (parts.length) {\n          var k = parts.shift();\n          path.push(k);\n          if (property.keyMap && property.keyMap[path.join(\".\")]) {\n            path = property.keyMap[path.join(\".\")].split(\".\");\n          }\n        }\n        this.set(path.join(\".\"), this._deepClone(detail.value));\n        this.notifyPath(path.join(\".\"));\n      } else {\n        property.value = detail.value;\n        this.set(path, this._deepClone(detail.value));\n        this.notifyPath(path);\n      }\n    }\n  }\n  _setValue() {\n    var value = {};\n    this._schemaProperties.forEach(property => {\n      if (typeof property.value !== typeof undefined) {\n        value[property.property] = this._deepClone(property.value);\n      }\n    });\n    this.set(\"value\", value);\n    this.notifyPath(\"value.*\");\n  }\n  _buildForm() {\n    let autofocus = this.autofocus;\n    this._schemaProperties.forEach(property => {\n      var el = this.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n      if (property.component.name === \"paper-input\") {\n        el.style[\"background-color\"] = \"transparent\";\n        el.style[\"width\"] = \"100%\";\n      }\n      el.setAttribute(\"name\", property.property);\n      if (autofocus) el.setAttribute(\"autofocus\", autofocus);\n      autofocus = false;\n      el.className = \"flex start-justified\";\n      // set the element's default value to be what was passed into the schema\n      el[property.component.valueProperty] = property.value;\n      // support component attribute overrides\n      for (var attr in property.component.attributes) {\n        el.setAttribute(attr, property.component.attributes[attr]);\n      }\n      // support component property overrides\n      for (var prop in property.component.properties) {\n        el[prop] = property.component.properties[prop];\n      }\n      this.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      if (typeof this.$ !== typeof undefined) {\n        dom(this).appendChild(el);\n      }\n      // support for slot injection too!\n      if (property.component.slot != \"\") {\n        let temp = document.createElement(\"div\");\n        temp.innerHTML = property.component.slot;\n        let cloneDiv = temp.cloneNode(true);\n        while (dom(cloneDiv).firstChild !== null) {\n          dom(el).appendChild(dom(cloneDiv).firstChild);\n        }\n      }\n      this.dispatchEvent(\n        new CustomEvent(\"form-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    });\n  }\n  _removePropertyEl(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    dom(this).removeChild(el);\n  }\n  _clearForm() {\n    if (typeof this.$ !== typeof undefined) {\n      var formEl = dom(this);\n      while (formEl.firstChild) {\n        this._removePropertyEl(formEl.firstChild);\n      }\n    }\n  }\n  _schemaChanged(newValue, oldValue) {\n    if (newValue) {\n      this._clearForm();\n      this._buildSchemaProperties();\n      this._buildForm();\n      this._setValue();\n    }\n  }\n  _errorChanged() {\n    dom(this).childNodes.forEach(el => {\n      var name = el.getAttribute(\"name\");\n      if (this.error && this.error[name]) {\n        el.error = this.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  }\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n  focus() {\n    console.log(this);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaObject.tag, EcoJsonSchemaObject);\nexport { EcoJsonSchemaObject };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-ripple/paper-ripple.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n\n/**\n`eco-json-schema-wizard` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-wizard schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-wizard>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-wizard\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaWizard extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-wizard\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host {\n          display: block;\n          @apply --layout-vertical;\n        }\n\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #fff;\n          }\n        }\n\n        .box,\n        #form {\n          display: -webkit-box;\n          display: -webkit-flex;\n          display: -moz-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-flex-align: center;\n          -ms-flex-align: center;\n          -webkit-align-items: center;\n          align-items: center;\n        }\n\n        .fullbleed {\n          z-index: 1;\n        }\n\n        app-toolbar.bottom {\n          --app-toolbar-color: var(--app-primary-color);\n          --app-toolbar-background: var(--dark-theme-text-color);\n        }\n\n        app-toolbar.bottom paper-icon-button {\n          --app-toolbar-color: var(--dark-theme-text-color);\n          --app-toolbar-background: var(--app-primary-color);\n        }\n      </style>\n      <div class=\"vertical flex layout fullbleed\">\n        <!--\n        paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button\n      -->\n        <app-toolbar>\n          <paper-icon-button\n            id=\"prevButton\"\n            icon=\"arrow-back\"\n            hidden\\$=\"{{!hasPrev}}\"\n            on-click=\"prev\"\n            raised=\"\"\n            >{{localize('prev')}}</paper-icon-button\n          ><span\n            class=\"title layout horizontal flex\"\n            style=\"white-space: normal\"\n            >[[title]]</span\n          >\n          <paper-icon-button\n            id=\"nextButton\"\n            icon=\"arrow-forward\"\n            hidden\\$=\"{{!hasNext}}\"\n            on-click=\"next\"\n            raised=\"\"\n            >{{localize('next')}}</paper-icon-button\n          >\n          <paper-icon-button\n            id=\"submitButton\"\n            icon=\"cloud-upload\"\n            on-click=\"submit\"\n            raised=\"\"\n            >{{localize('submit')}}</paper-icon-button\n          >\n        </app-toolbar>\n        <iron-pages\n          id=\"form\"\n          class=\"layout horizontal flex start-justified\"\n          role=\"main\"\n          selected=\"[[page]]\"\n          attr-for-selected=\"name\"\n        ></iron-pages>\n        <app-toolbar class=\"bottom\">\n          <div hidden\\$=\"{{!hasPrev}}\" on-click=\"prev\">\n            <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\"\n              >{{localize('prev')}}</paper-icon-button\n            >\n            <span class=\"title layout\" style=\"white-space: normal\"\n              >{{localize('prev')}}</span\n            >\n          </div>\n          <span\n            class=\"title layout horizontal flex\"\n            style=\"white-space: normal\"\n          ></span>\n          <div hidden\\$=\"{{!hasNext}}\" on-click=\"next\">\n            <span class=\"title layout\" style=\"white-space: normal\"\n              >{{localize('next')}}</span\n            >\n            <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\"\n              >{{localize('next')}}</paper-icon-button\n            >\n          </div>\n        </app-toolbar>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      language: {\n        type: String,\n        notify: true\n      },\n      resources: {\n        type: Object,\n        notify: true\n      },\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        }\n      },\n      page: {\n        type: String,\n        notify: true,\n        observer: \"_pageChanged\"\n      },\n      pages: {\n        type: Array,\n        notify: true,\n        value: []\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      isReview: {\n        type: Boolean,\n        value: false,\n        notify: true\n      },\n      canSubmit: {\n        type: Boolean,\n        notify: true\n      },\n      hasNext: {\n        type: Boolean,\n        notify: true\n      },\n      hasPrev: {\n        type: Boolean,\n        notify: true\n      },\n      titles: {\n        type: Array,\n        notify: true,\n        value: []\n      },\n      title: {\n        type: String,\n        value: \"\",\n        notify: true\n      }\n    };\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  _buildSchemaProperties() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          property.value = \"\";\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          property.value = false;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          property.value = \"\";\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          property.value = \"\";\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          property.component.wizard = true;\n          property.value = {};\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          property.value = [];\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n        ctx.push(\"pages\", key);\n        ctx.push(\"titles\", schema.title);\n\n        return property;\n      }\n    );\n  }\n  _schemaPropertyChanged(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n            if (splice.addedKeys && splice.addedKeys[i]) {\n              property.keyMap = property.keyMap || {};\n              property.keyMap[\n                path.concat([splice.addedKeys[i]]).join(\".\")\n              ] = path.concat([i + splice.index]).join(\".\");\n            }\n            args.push(ctx._deepClone(splice.object[i + splice.index]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n\n      console.log(\"value: \" + JSON.stringify(this.value));\n    }\n  }\n  _setValue() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      value[property.property] = ctx._deepClone(property.value);\n    });\n    this.value = value;\n  }\n  _buildForm() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n\n      property.value = el[property.component.valueProperty];\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      dom(ctx.$.form).appendChild(el);\n    });\n  }\n  _removePropertyEl(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    dom(this.$.form).removeChild(el);\n  }\n  _clearForm() {\n    var formEl = dom(this.$.form);\n    while (formEl.firstChild) {\n      this._removePropertyEl(formEl.firstChild);\n    }\n  }\n  _schemaChanged() {\n    this._clearForm();\n    this._buildSchemaProperties();\n    this._buildForm();\n    this._setValue();\n    if (this.pages.length > 0) {\n      this.set(\"page\", this.pages[0]);\n    }\n    this.set(\"title\", this.titles[0]);\n  }\n  next() {\n    var current = this.pages.indexOf(this.page);\n    var next = current;\n    if (current !== -1) {\n      if (current < this.pages.length - 1) {\n        next = current + 1;\n      }\n      this.set(\"page\", this.pages[next]);\n      this.set(\"title\", this.titles[next]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  }\n  prev() {\n    var current = this.pages.indexOf(this.page);\n    var prev = current;\n    if (current !== -1) {\n      if (current > 0) {\n        prev = current - 1;\n      }\n      this.set(\"page\", this.pages[prev]);\n      this.set(\"title\", this.titles[prev]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  }\n  submit() {\n    this.dispatchEvent(\n      new CustomEvent(\"submit\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: true\n      })\n    );\n  }\n  _pageChanged() {\n    var current = this.pages.indexOf(this.page);\n    if (current === 0) {\n      this.set(\"hasPrev\", false);\n    } else {\n      this.set(\"hasPrev\", true);\n    }\n    if (current === this.pages.length - 1) {\n      this.set(\"hasNext\", false);\n    } else {\n      this.set(\"hasNext\", true);\n    }\n  }\n  _errorChanged() {\n    var ctx = this;\n    dom(this.$.form).childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  }\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaWizard.tag, EcoJsonSchemaWizard);\nexport { EcoJsonSchemaWizard };\n"],"names":["EcoJsonSchemaBoolean","PolymerElement","schema","this","inputEl","$","checkbox","component","properties","Object","keys","forEach","prop","title","_label","type","_isSchemaBoolean","_isSchemaNumber","_isSchemaString","Array","isArray","indexOf","html","observer","value","Boolean","notify","error","String","window","customElements","define","tag","EcoJsonSchemaEnum","mixinBehaviors","IronValidatableBehavior","dropdown","_items","filter","item","label","invalid","EcoJsonSchemaInput","AppLocalizeBehavior","input","required","multipleOf","step","isNaN","maximum","exclusiveMaximum","max","minimum","exclusiveMinimum","min","format","alwaysFloatLabel","maxLength","maxlength","minLength","minlength","pattern","errorMessage","language","resources","EcoJsonSchemaFile","set","fileInput","_showDropText","raised","toggleAttribute","button","noink","droppable","setupDrop","uploadBorder","UploadBorder","toggleClass","ondragover","e","stopPropagation","effect","dataTransfer","dropEffect","effectAllowed","ondragleave","ondrop","event","preventDefault","multi","files","length","i","file","mimeType","match","fileType","name","accept","progress","complete","push","uploadFile","elem","document","createEvent","evt","initEvent","dispatchEvent","target","xhr","abort","splice","cancel","model","__data__","self","microTask","run","CustomEvent","bubbles","cancelable","composed","detail","reader","FileReader","addEventListener","r","result","attributes","hasOwnProperty","readAsDataURL","console","log","JSON","stringify","_isSchemaFile","s","dropText","headers","retryText","removeText","successText","errorText","_shownDropText","additional","fileDataName","paperButtonAlt","paperButtonTitle","EcoJsonSchemaArray","newValue","oldValue","_typeof","setTimeout","_this","_buildSchemaArrayItems","_onAddItemWithValue","parseInt","_clearForm","_schemaArrayItems","map","notifyPath","keySplices","warn","indexSplices","args","index","removed","ii","_this2","_removeArrayEl","children","addedCount","object","componentEl","create","schemaArrayItem","containerEl","header","buttonEl","icon","listen","classList","add","dom","appendChild","beforeEl","insertBefore","valueProperty","replace","toLowerCase","_deepClone","apply","path","test","concat","split","slice","join","_this3","el","polyEl","childNodes","unlisten","firstChild","removeChild","formEl","rowEl","idx","_this4","values","pointer","items","_isSchemaEnum","_isSchemaValue","_isSchemaObject","_isSchemaArray","localTarget","previousSibling","o","parse","EcoJsonSchemaObject","ctx","_schemaProperties","key","property","slot","schemaProperty","parts","shift","keyMap","k","addedKeys","autofocus","attr","style","setAttribute","className","temp","createElement","innerHTML","cloneDiv","cloneNode","_removePropertyEl","_buildSchemaProperties","_buildForm","_setValue","getAttribute","wizard","EcoJsonSchemaWizard","form","pages","titles","current","page","next","prev","isReview","canSubmit","hasNext","hasPrev"],"mappings":"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"}
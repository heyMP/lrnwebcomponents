!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("@polymer/polymer/polymer-element.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/iron-flex-layout/iron-flex-layout-classes.js"),require("@polymer/iron-icons/image-icons.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icons/editor-icons.js"),require("@polymer/iron-pages/iron-pages.js"),require("@polymer/app-layout/app-toolbar/app-toolbar.js"),require("@polymer/paper-menu-button/paper-menu-button.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("@polymer/paper-ripple/paper-ripple.js"),require("@polymer/app-localize-behavior/app-localize-behavior.js"),require("@polymer/polymer/lib/legacy/class.js"),require("@polymer/polymer/lib/elements/dom-if.js"),require("@polymer/polymer/lib/utils/flattened-nodes-observer.js"),require("paper-collapse-item/paper-collapse-item.js"),require("paper-collapse-item/paper-collapse-group.js"),require("@polymer/paper-checkbox/paper-checkbox.js"),require("@polymer/paper-dropdown-menu/paper-dropdown-menu.js"),require("@polymer/paper-item/paper-item.js"),require("@polymer/paper-listbox/paper-listbox.js"),require("@polymer/iron-validatable-behavior/iron-validatable-behavior.js"),require("@polymer/paper-input/paper-input.js"),require("@polymer/paper-styles/typography.js"),require("@polymer/polymer/lib/utils/async.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/iron-icon/iron-icon.js")):"function"==typeof define&&define.amd?define(["@polymer/polymer/polymer-element.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/iron-flex-layout/iron-flex-layout-classes.js","@polymer/iron-icons/image-icons.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icons/editor-icons.js","@polymer/iron-pages/iron-pages.js","@polymer/app-layout/app-toolbar/app-toolbar.js","@polymer/paper-menu-button/paper-menu-button.js","@polymer/paper-icon-button/paper-icon-button.js","@polymer/paper-ripple/paper-ripple.js","@polymer/app-localize-behavior/app-localize-behavior.js","@polymer/polymer/lib/legacy/class.js","@polymer/polymer/lib/elements/dom-if.js","@polymer/polymer/lib/utils/flattened-nodes-observer.js","paper-collapse-item/paper-collapse-item.js","paper-collapse-item/paper-collapse-group.js","@polymer/paper-checkbox/paper-checkbox.js","@polymer/paper-dropdown-menu/paper-dropdown-menu.js","@polymer/paper-item/paper-item.js","@polymer/paper-listbox/paper-listbox.js","@polymer/iron-validatable-behavior/iron-validatable-behavior.js","@polymer/paper-input/paper-input.js","@polymer/paper-styles/typography.js","@polymer/polymer/lib/utils/async.js","@polymer/paper-button/paper-button.js","@polymer/iron-icon/iron-icon.js"],n):n((e=e||self).polymerElement_js,e.polymer_dom_js,null,null,null,null,null,null,null,null,null,e.appLocalizeBehavior_js,e.class_js,null,null,null,null,null,null,null,null,e.ironValidatableBehavior_js,null,null,e.async_js)}(this,function(e,n,t,o,a,r,i,l,s,p,c,u,m,d,h,y,f,v,b,g,x,k,_,j,S){"use strict";function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function C(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,n,t){return n&&C(e.prototype,n),t&&C(e,t),e}function P(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&z(e,n)}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,n){return(z=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function E(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function $(e,n,t){return($="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,t){var o=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=B(e)););return e}(e,n);if(o){var a=Object.getOwnPropertyDescriptor(o,n);return a.get?a.get.call(t):a.value}})(e,n,t||e)}function N(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function I(){var e=N(['\n      <style is="custom-style" include="iron-flex iron-flex-alignment">\n        paper-checkbox {\n          color: #737373;\n          padding: 2px;\n          display: block;\n          font-size: 16px;\n          white-space: normal;\n        }\n      </style>\n\n      <paper-checkbox\n        id="checkbox"\n        class="flex"\n        checked="{{value}}"\n        invalid="[[error]]"\n        >[[_label]]</paper-checkbox\n      >\n    ']);return I=function(){return e},e}var T=function(n){function t(){return A(this,t),E(this,B(t).apply(this,arguments))}return P(t,e.PolymerElement),O(t,[{key:"_schemaChanged",value:function(){var e=this.schema,n=this.$.checkbox;e.component&&e.component.properties&&Object.keys(e.component.properties).forEach(function(t){n[t]=e.component.properties[t]}),e.title&&(this._label=e.title)}},{key:"_isSchemaValue",value:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}}],[{key:"tag",get:function(){return"eco-json-schema-boolean"}},{key:"template",get:function(){return e.html(I())}},{key:"properties",get:function(){return{schema:{type:Object,observer:"_schemaChanged"},value:{type:Boolean,notify:!0,value:!1},error:{type:Boolean,value:!1},_label:{type:String,notify:!0,value:""}}}}]),t}();function F(){var e=N(['\n      <style is="custom-style" include="iron-flex iron-flex-alignment">\n        paper-input {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        paper-dropdown-menu {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n          --paper-dropdown-menu-button: {\n            padding: 2px;\n          }\n        }\n      </style>\n\n      <paper-dropdown-menu\n        id="dropdown"\n        class="layout horizontal vertical"\n        value="{{value}}"\n        required=""\n      >\n        <paper-dropdown-menu class="dropdown-content">\n          <paper-listbox slot="dropdown-content" selected="0">\n            <template is="dom-repeat" items="[[_items]]">\n              <paper-item class="flex" label="[[item]]">[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </paper-dropdown-menu>\n    ']);return F=function(){return e},e}window.customElements.define(T.tag,T);var q=function(n){function t(){return A(this,t),E(this,B(t).apply(this,arguments))}return P(t,m.mixinBehaviors([k.IronValidatableBehavior],e.PolymerElement)),O(t,[{key:"_schemaChanged",value:function(){var e=this.schema,n=this.$.dropdown;e.component&&e.component.properties&&Object.keys(e.component.properties).forEach(function(t){n[t]=e.component.properties[t]}),this._items=e.enum.filter(function(e){return null!==e}),e.title&&(n.label=e.title)}},{key:"_errorChanged",value:function(){this.error?this.$.dropdown.invalid=!0:this.$.dropdown.invalid=!1}},{key:"_isSchemaValue",value:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}}],[{key:"template",get:function(){return e.html(F())}},{key:"tag",get:function(){return"eco-json-schema-enum"}},{key:"properties",get:function(){return{schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:null},error:{type:String,observer:"_errorChanged",value:null},_items:{type:Object,value:function(){return{}}}}}}]),t}();function M(){var e=N(['\n      <custom-style>\n        <style\n          is="custom-style"\n          include="iron-flex iron-flex-alignment"\n        ></style>\n      </custom-style>\n      <paper-input\n        id="input"\n        class="flex"\n        value="{{value}}"\n        auto-validate\n      ></paper-input>\n    ']);return M=function(){return e},e}window.customElements.define(q.tag,q);var L=function(n){function t(){return A(this,t),E(this,B(t).apply(this,arguments))}return P(t,m.mixinBehaviors([u.AppLocalizeBehavior],e.PolymerElement)),O(t,[{key:"_schemaChanged",value:function(){var e=this.schema,n=this.$.input;e.required&&(n.required=!0),this._isSchemaNumber(e.type)&&(n.type="number",e.multipleOf&&(n.step=e.multipleOf),isNaN(e.maximum)||(e.exclusiveMaximum?n.max=e.maximum-(e.multipleOf||1):n.max=e.maximum),isNaN(e.minimum)||(e.exclusiveMinimum?n.min=e.minimum+(e.multipleOf||1):n.min=e.minimum)),this._isSchemaString(e.type)&&("date-time"===e.format?(n.type="datetime-local",n.alwaysFloatLabel=!0):"date"===e.format?n.type="date":"email"===e.format?n.type="email":"hostname"===e.format?n.type="text":"ipv4"===e.format?n.type="text":"ipv6"===e.format?n.type="text":"uri"===e.format?n.type="url":n.type="text",e.maxLength&&(n.maxlength=e.maxLength),e.minLength&&(n.minlength=e.minLength),e.pattern&&(n.pattern=e.pattern)),e.component&&e.component.properties&&Object.keys(e.component.properties).forEach(function(t){n[t]=e.component.properties[t]}),n.alwaysFloatLabel=!0,e.title&&(n.label=e.title)}},{key:"_errorChanged",value:function(){this.error?(this.$.input.errorMessage=this.error,this.$.input.invalid=!0):(this.$.input.invalid=!1,this.$.input.errorMessage=null)}},{key:"_isSchemaValue",value:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}}],[{key:"tag",get:function(){return"eco-json-schema-input"}},{key:"template",get:function(){return e.html(M())}},{key:"properties",get:function(){return{language:{value:"en"},resources:{value:function(){return{}}},schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:function(){return""}},error:{type:String,observer:"_errorChanged",value:null}}}}]),t}();function V(){var e=N(['\n      <style is="custom-style" include="iron-flex iron-flex-alignment">\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        :host {\n          display: inline-block;\n        }\n\n        .enabled {\n          border: 1px dashed #555;\n          @apply --file-upload-upload-border-enabled;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n          @apply --file-upload-upload-border-hover;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 20px;\n          max-height: 300px;\n          overflow-y: auto;\n          display: inline-block;\n          @apply --file-upload-upload-border;\n        }\n\n        #dropArea {\n          text-align: center;\n          @apply --file-upload-drop-area;\n        }\n\n        paper-button#button {\n          margin-bottom: 20px;\n          @apply --file-upload-button;\n        }\n\n        .file {\n          padding: 10px 0px;\n          @apply --file-upload-file;\n        }\n\n        .commands {\n          float: right;\n          @apply --file-upload-commands;\n        }\n\n        .commands iron-icon:not([icon="check-circle"]) {\n          cursor: pointer;\n          opacity: 0.9;\n          @apply --file-upload-commands-faded;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n          @apply --file-upload-commands-hovered;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin-top: 2px;\n          @apply --file-upload-error;\n        }\n\n        .progress-bar {\n          margin-top: 2px;\n        }\n\n        paper-progress {\n          --paper-progress-active-color: #03a9f4;\n        }\n\n        paper-progress[error] {\n          --paper-progress-active-color: #f40303;\n        }\n      </style>\n\n      <div class="layout horizontal nowrap">\n        <div>\n          <paper-button\n            id="button"\n            on-click="_fileClick"\n            alt="{{paperButtonAlt}}"\n            raised=""\n          >\n            <iron-icon icon="editor:attach-file"></iron-icon\n            >{{paperButtonTitle}}</paper-button\n          >\n          <div id="UploadBorder">\n            <div id="dropArea" hidden$="{{!_shownDropText}}">{{dropText}}</div>\n            <template is="dom-repeat" items="{{files}}">\n              <div class="file">\n                <div class="name">\n                  <span>{{item.name}}</span>\n                  <div class="commands">\n                    <iron-icon\n                      icon="autorenew"\n                      title="{{retryText}}"\n                      on-click="_retryUpload"\n                      hidden$="{{!item.error}}"\n                    ></iron-icon>\n                    <iron-icon\n                      icon="cancel"\n                      title="{{removeText}}"\n                      on-click="_cancelUpload"\n                      hidden$="{{item.complete}}"\n                    ></iron-icon>\n                    <iron-icon\n                      icon="check-circle"\n                      title="{{successText}}"\n                      hidden$="{{!item.complete}}"\n                    ></iron-icon>\n                  </div>\n                </div>\n                <div class="error" hidden$="{{!item.error}}">\n                  {{errorText}}\n                </div>\n              </div>\n            </template>\n          </div>\n        </div>\n        <input\n          type="file"\n          id="fileInput"\n          on-change="_fileChange"\n          hidden=""\n          multiple="{{multi}}"\n          accept="{{accept}}"\n        />\n      </div>\n    '],['\n      <style is="custom-style" include="iron-flex iron-flex-alignment">\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        :host {\n          display: inline-block;\n        }\n\n        .enabled {\n          border: 1px dashed #555;\n          @apply --file-upload-upload-border-enabled;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n          @apply --file-upload-upload-border-hover;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 20px;\n          max-height: 300px;\n          overflow-y: auto;\n          display: inline-block;\n          @apply --file-upload-upload-border;\n        }\n\n        #dropArea {\n          text-align: center;\n          @apply --file-upload-drop-area;\n        }\n\n        paper-button#button {\n          margin-bottom: 20px;\n          @apply --file-upload-button;\n        }\n\n        .file {\n          padding: 10px 0px;\n          @apply --file-upload-file;\n        }\n\n        .commands {\n          float: right;\n          @apply --file-upload-commands;\n        }\n\n        .commands iron-icon:not([icon="check-circle"]) {\n          cursor: pointer;\n          opacity: 0.9;\n          @apply --file-upload-commands-faded;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n          @apply --file-upload-commands-hovered;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin-top: 2px;\n          @apply --file-upload-error;\n        }\n\n        .progress-bar {\n          margin-top: 2px;\n        }\n\n        paper-progress {\n          --paper-progress-active-color: #03a9f4;\n        }\n\n        paper-progress[error] {\n          --paper-progress-active-color: #f40303;\n        }\n      </style>\n\n      <div class="layout horizontal nowrap">\n        <div>\n          <paper-button\n            id="button"\n            on-click="_fileClick"\n            alt="{{paperButtonAlt}}"\n            raised=""\n          >\n            <iron-icon icon="editor:attach-file"></iron-icon\n            >{{paperButtonTitle}}</paper-button\n          >\n          <div id="UploadBorder">\n            <div id="dropArea" hidden\\$="{{!_shownDropText}}">{{dropText}}</div>\n            <template is="dom-repeat" items="{{files}}">\n              <div class="file">\n                <div class="name">\n                  <span>{{item.name}}</span>\n                  <div class="commands">\n                    <iron-icon\n                      icon="autorenew"\n                      title="{{retryText}}"\n                      on-click="_retryUpload"\n                      hidden\\$="{{!item.error}}"\n                    ></iron-icon>\n                    <iron-icon\n                      icon="cancel"\n                      title="{{removeText}}"\n                      on-click="_cancelUpload"\n                      hidden\\$="{{item.complete}}"\n                    ></iron-icon>\n                    <iron-icon\n                      icon="check-circle"\n                      title="{{successText}}"\n                      hidden\\$="{{!item.complete}}"\n                    ></iron-icon>\n                  </div>\n                </div>\n                <div class="error" hidden\\$="{{!item.error}}">\n                  {{errorText}}\n                </div>\n              </div>\n            </template>\n          </div>\n        </div>\n        <input\n          type="file"\n          id="fileInput"\n          on-change="_fileChange"\n          hidden=""\n          multiple="{{multi}}"\n          accept="{{accept}}"\n        />\n      </div>\n    ']);return V=function(){return e},e}window.customElements.define(L.tag,L);var U=function(n){function t(){return A(this,t),E(this,B(t).apply(this,arguments))}return P(t,m.mixinBehaviors([u.AppLocalizeBehavior],e.PolymerElement)),O(t,[{key:"clear",value:function(){this.set("files",[]),this.$.fileInput.value="",this._showDropText()}},{key:"ready",value:function(){$(B(t.prototype),"ready",this).call(this),this.raised&&this.toggleAttribute("raised",!0,this.$.button),this.noink&&this.toggleAttribute("noink",!0,this.$.button),this.droppable&&(this._showDropText(),this.setupDrop())}},{key:"setupDrop",value:function(){var e=this.$.UploadBorder;this.toggleClass("enabled",!0,e),this.ondragover=function(n){n.stopPropagation(),this.toggleClass("hover",!0,e);var t=n.dataTransfer&&n.dataTransfer.dropEffect,o=n.dataTransfer&&n.dataTransfer.effectAllowed;return"none"===t&&"none"!==o&&(n.dataTransfer.dropEffect="move"===o?"move":"copy"),!1},this.ondragleave=function(){return this.toggleClass("hover",!1,e),!1},this.ondrop=function(n){if(this.toggleClass("hover",!1,e),n.preventDefault(),this.multi||0===this.files.length)for(var t=n.dataTransfer.files.length,o=0;o<t;o++){var a=n.dataTransfer.files[o],r=""!==a.type?a.type.match(/^[^\/]*\//)[0]:null,i=a.name.match(/\.[^\.]*$/)[0];(""===this.accept||this.accept.indexOf(r)>-1||this.accept.indexOf(i)>-1)&&(a.progress=0,a.error=!1,a.complete=!1,this.push("files",a),this.uploadFile(a))}}}},{key:"_fileClick",value:function(){var e=this.$.fileInput;if(e&&document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!1),e.dispatchEvent(n)}}},{key:"_fileChange",value:function(e){for(var n=e.target.files.length,t=0;t<n;t++){var o=e.target.files[t];o.progress=0,o.error=!1,o.complete=!1,this.push("files",o),this.multi||0===this.files.length||(this.set("files",[]),this.set("value",{})),this.uploadFile(o)}}},{key:"cancel",value:function(e){e&&(e.xhr&&e.xhr.abort(),this.splice("files",this.files.indexOf(e),1),this._showDropText())}},{key:"_cancelUpload",value:function(e){this.cancel(e.model.__data__.item)}},{key:"_retryUpload",value:function(e){e.model.set("item.error",!1),e.model.set("item.progress",0);var n=this;S.microTask.run(function(){n.uploadFile(e.model.__data__.item)})}},{key:"_showDropText",value:function(){this.set("_shownDropText",!this.files.length&&this.droppable)}},{key:"uploadFile",value:function(e){if(e){this.dispatchEvent(new CustomEvent("before-upload",{bubbles:!0,cancelable:!0,composed:!0,detail:!0})),this._showDropText();this.files.indexOf(e);var n=this,t=new FileReader;t.addEventListener("load",function(){var o=t.result;n.set("value."+n.attributes.name.value+"."+n.files.indexOf(e),o)},!1),n.value.hasOwnProperty(n.attributes.name.value)||this.set("value."+n.attributes.name.value,{}),t.readAsDataURL(e)}}},{key:"_valueChanged",value:function(){console.log("this.value: "+JSON.stringify(this.value))}},{key:"_schemaChanged",value:function(){this.schema}},{key:"_isSchemaValue",value:function(e){return this._isSchemaFile(e)}},{key:"_isSchemaFile",value:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}},{key:"stringify",value:function(e){return JSON.stringify(e)}}],[{key:"tag",get:function(){return"eco-json-schema-file"}},{key:"template",get:function(){return e.html(V())}},{key:"properties",get:function(){return{language:{value:"en",notify:!0},resources:{value:function(){return{}},notify:!0},schema:{type:Object,observer:"_schemaChanged"},value:{type:Object,notify:!0,value:function(){return{}},observer:"_valueChanged"},target:{type:String,value:""},accept:{type:String,value:""},droppable:{type:Boolean,value:!1},dropText:{type:String,value:"Drop Files Here"},multi:{type:Boolean,value:!0},files:{type:Array,notify:!0,value:function(){return[]}},raised:{type:Boolean,value:!0},noink:{type:Boolean,value:!1},headers:{type:Object,value:{}},retryText:{type:String,value:"Retry Upload"},removeText:{type:String,value:"Remove"},successText:{type:String,value:"Success"},errorText:{type:String,value:"Error uploading file..."},_shownDropText:{type:Boolean,value:!1},additional:{type:Object,value:{}},fileDataName:{type:String,value:"file"},paperButtonAlt:{type:String,value:""},paperButtonTitle:{type:String,value:""}}}}]),t}();function D(){var e=N(['\n      <custom-style>\n        <style is="custom-style" include="iron-flex iron-flex-alignment">\n          paper-input {\n            padding: 2px;\n\n            --paper-input-container-label: {\n              white-space: normal;\n              position: static;\n              font-size: 22px;\n              color: #212121;\n            }\n          }\n\n          paper-collapse-item {\n            --paper-collapse-item-header: {\n              font-weight: bold;\n              padding: 8px 0 0 8px;\n            }\n          }\n\n          #form {\n            border: 1px solid #aaaaaa;\n          }\n\n          #form div:nth-child(odd) {\n            background-color: #f2f2f2;\n            padding: 4px;\n          }\n\n          #form div:nth-child(even) {\n            background-color: #e2e2e2;\n            border-top: 1px solid #aaaaaa;\n            border-bottom: 1px solid #aaaaaa;\n            padding: 4px;\n          }\n\n          #form div:focus,\n          #form div:hover,\n          #form div:active {\n            background-color: #ffffff !important;\n          }\n\n          paper-icon-button {\n            float: right;\n            border-radius: 50%;\n          }\n\n          .array-add {\n            color: #34e79a;\n            background-color: #f8f8f8;\n          }\n\n          .array-remove-element {\n            color: #f44336;\n            background-color: #f8f8f8;\n          }\n\n          .label {\n            @apply --paper-input-container-label;\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n\n          :host {\n            display: block;\n          }\n          .label {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n            @apply --paper-input-container-label;\n          }\n        </style>\n      </custom-style>\n      <div class="horizontal layout">\n        <div class="flex" hidden$="[[!label]]">[[label]]</div>\n        <paper-icon-button\n          id="addarray"\n          title="Add another item"\n          class="array-add"\n          icon="add"\n          on-click="_onAddItem"\n          role="button"\n          aria-label="Add another item"\n        ></paper-icon-button>\n      </div>\n\n      <paper-collapse-group id="form" class="vertical flex layout"\n        ><slot></slot\n      ></paper-collapse-group>\n    '],['\n      <custom-style>\n        <style is="custom-style" include="iron-flex iron-flex-alignment">\n          paper-input {\n            padding: 2px;\n\n            --paper-input-container-label: {\n              white-space: normal;\n              position: static;\n              font-size: 22px;\n              color: #212121;\n            }\n          }\n\n          paper-collapse-item {\n            --paper-collapse-item-header: {\n              font-weight: bold;\n              padding: 8px 0 0 8px;\n            }\n          }\n\n          #form {\n            border: 1px solid #aaaaaa;\n          }\n\n          #form div:nth-child(odd) {\n            background-color: #f2f2f2;\n            padding: 4px;\n          }\n\n          #form div:nth-child(even) {\n            background-color: #e2e2e2;\n            border-top: 1px solid #aaaaaa;\n            border-bottom: 1px solid #aaaaaa;\n            padding: 4px;\n          }\n\n          #form div:focus,\n          #form div:hover,\n          #form div:active {\n            background-color: #ffffff !important;\n          }\n\n          paper-icon-button {\n            float: right;\n            border-radius: 50%;\n          }\n\n          .array-add {\n            color: #34e79a;\n            background-color: #f8f8f8;\n          }\n\n          .array-remove-element {\n            color: #f44336;\n            background-color: #f8f8f8;\n          }\n\n          .label {\n            @apply --paper-input-container-label;\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n\n          :host {\n            display: block;\n          }\n          .label {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n            @apply --paper-input-container-label;\n          }\n        </style>\n      </custom-style>\n      <div class="horizontal layout">\n        <div class="flex" hidden\\$="[[!label]]">[[label]]</div>\n        <paper-icon-button\n          id="addarray"\n          title="Add another item"\n          class="array-add"\n          icon="add"\n          on-click="_onAddItem"\n          role="button"\n          aria-label="Add another item"\n        ></paper-icon-button>\n      </div>\n\n      <paper-collapse-group id="form" class="vertical flex layout"\n        ><slot></slot\n      ></paper-collapse-group>\n    ']);return D=function(){return e},e}window.customElements.define(U.tag,U);var R=function(t){function o(){return A(this,o),E(this,B(o).apply(this,arguments))}return P(o,m.mixinBehaviors([u.AppLocalizeBehavior],e.PolymerElement)),O(o,[{key:"_valueChanged",value:function(e,n){var t=this;e!==n&&"undefined"!==w(e)&&"undefined"!==w(this.schema)&&setTimeout(function(){for(var n in t._buildSchemaArrayItems(),e)t._onAddItemWithValue(e[n],parseInt(n))},325)}},{key:"disconnectedCallback",value:function(){this._clearForm(),$(B(o.prototype),"disconnectedCallback",this).call(this)}},{key:"_buildSchemaArrayItems",value:function(){this.set("_schemaArrayItems",[])}},{key:"_setValue",value:function(){var e=this._schemaArrayItems.map(function(e){return e.value});this.set("value",[]),this.set("value",e),this.notifyPath("value.*")}},{key:"_schemaArraySplicesChanged",value:function(e){var t=this;if(!e)return!1;e.keySplices&&console.warn("Got keySplices, don't know what to do with them!"),e.indexSplices.forEach(function(e){var o=["value",e.index,e.removed.length];if(e.removed&&e.removed.length)for(var a=e.index,r=e.index+e.removed.length;a<r;a++)t._removeArrayEl(t.children[a]);if(e.addedCount)for(a=e.index,r=e.index+e.addedCount;a<r;a++){var i=e.object[a],l=t.create(i.component.name,{label:i.label,schema:i.schema,schemaArrayItem:i}),s=t.create("paper-collapse-item",{header:"Item "+(a+1)}),p=t.create("paper-icon-button",{icon:"remove",title:"Remove item"});t.listen(p,"click","_onRemoveItem"),p.classList.add("array-remove-element"),l.classList.add("flex","horizontal","layout"),n.dom(s).appendChild(l),n.dom(s).appendChild(p);var c=t.children[a];c?n.dom(t).insertBefore(s,c):n.dom(t).appendChild(s),t.listen(l,i.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaArrayItemChanged"),o.push(t._deepClone(l[i.component.valueProperty]))}t.splice.apply(t,o)})}},{key:"_schemaArrayItemChanged",value:function(e,n){var t=this;if(!n.path||!/\.length$/.test(n.path)){var o=e.target.schemaArrayItem,a=this._schemaArrayItems.indexOf(o),r=["value",a];n.path&&/\.splices$/.test(n.path)?(r=r.concat(n.path.split(".").slice(1,-1)),n.value.keySplices&&console.warn("Got keySplices, don't know what to do with them!"),n.value.indexSplices.forEach(function(e){var n=[r.join("."),e.index,e.removed.length];if(e.addedCount)for(var o=e.index,a=e.index+e.addedCount;o<a;o++)n.push(t._deepClone(e.object[o]));t.splice.apply(t,n)})):n.path?(r=r.concat(n.path.split(".").slice(1)),this.set(r,this._deepClone(n.value)),this.notifyPath(r)):(this.splice("value",a,1,this._deepClone(n.value)),this.notifyPath("value.1"))}}},{key:"_removeArrayEl",value:function(e){var t=n.dom(e);"undefined"!==w(t.childNodes[0])&&(this.unlisten(t.childNodes[0],t.firstChild.schemaArrayItem.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaArrayItemChanged"),"undefined"!==w(t.childNodes[1])&&this.unlisten(t.childNodes[1],"click","_onRemoveItem")),e.schemaArrayItem=null,n.dom(this).removeChild(e)}},{key:"_clearForm",value:function(){for(var e=n.dom(this);e.firstChild;)this._removeArrayEl(e.firstChild)}},{key:"_schemaChanged",value:function(){this._clearForm(),this._buildSchemaArrayItems()}},{key:"_errorChanged",value:function(){var e=this;n.dom(this).childNodes.forEach(function(t,o){e.error&&e.error[o]?n.dom(t).childNodes[0].error=e.error[o]:n.dom(t).childNodes[0].error=null})}},{key:"_onAddItemWithValue",value:function(e,t){var o=this.schema.items,a=0;if("undefined"!==w(e))for(a in e)"undefined"!==w(o.properties[a])&&(o.properties[a].value=e[a]);var r={schema:o,component:o.component||{}};if(o.title&&(r.label=o.title),r.component.valueProperty||(r.component.valueProperty="value"),!r.component.name)if(this._isSchemaEnum(o))r.component.name="eco-json-schema-enum";else if(this._isSchemaBoolean(o.type))r.component.name="eco-json-schema-boolean";else if(this._isSchemaFile(o.type))r.component.name="eco-json-schema-file";else if(this._isSchemaValue(o.type))r.component.name="eco-json-schema-input";else if(this._isSchemaObject(o.type))r.component.name="eco-json-schema-object";else{if(!this._isSchemaArray(o.type))return console.error("Unknown item type %s",o.type);r.component.name="eco-json-schema-array"}var i=this.create(r.component.name,{label:r.label,schema:r.schema,schemaArrayItem:r}),l=this.create("paper-collapse-item",{header:"Item "+(this.children.length+1)}),s=this.create("paper-icon-button",{icon:"remove",title:"Remove item"});this.listen(s,"click","_onRemoveItem"),s.classList.add("array-remove-element"),i.classList.add("flex","horizontal","layout"),n.dom(l).appendChild(i),n.dom(l).appendChild(s);var p=this.children[this.children.length];p?n.dom(this).insertBefore(l,p):n.dom(this).appendChild(l),this.listen(i,r.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaArrayItemChanged"),this._schemaArrayItems.push(r)}},{key:"_onAddItem",value:function(e){var n=this.schema.items,t={label:n.title,schema:n,component:n.component||{}};for(var o in t.component.valueProperty||(t.component.valueProperty="value"),t.schema.properties)t.schema.properties[o].value=null;if(!t.component.name)if(this._isSchemaEnum(n))t.component.name="eco-json-schema-enum";else if(this._isSchemaBoolean(n.type))t.component.name="eco-json-schema-boolean";else if(this._isSchemaFile(n.type))t.component.name="eco-json-schema-file";else if(this._isSchemaValue(n.type))t.component.name="eco-json-schema-input";else if(this._isSchemaObject(n.type))t.component.name="eco-json-schema-object";else{if(!this._isSchemaArray(n.type))return console.error("Unknown item type %s",n.type);t.component.name="eco-json-schema-array"}this.push("_schemaArrayItems",t)}},{key:"_onRemoveItem",value:function(e){var t=n.dom(e).localTarget.previousSibling.schemaArrayItem,o=this._schemaArrayItems.indexOf(t);this.splice("_schemaArrayItems",o,1)}},{key:"_deepClone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"_isSchemaValue",value:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)||this._isSchemaFile(e)}},{key:"_isSchemaFile",value:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaEnum",value:function(e){return!!e.enum}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}}],[{key:"tag",get:function(){return"eco-json-schema-array"}},{key:"template",get:function(){return e.html(D())}},{key:"properties",get:function(){return{schema:{type:Object,notify:!0,observer:"_schemaChanged"},label:{type:String},value:{type:Array,notify:!0,value:function(){return[]},observer:"_valueChanged"},error:{type:Object,observer:"_errorChanged"},_schemaArrayItems:{type:Array,notify:!0}}}},{key:"observers",get:function(){return["_schemaArraySplicesChanged(_schemaArrayItems.splices)"]}}]),o}();function J(){var e=N(['\n      <custom-style>\n        <style is="custom-style" include="iron-flex iron-flex-alignment">\n          div.layout {\n            height: auto;\n          }\n          #form {\n            display: block;\n            @apply --eco-json-schema-object-form;\n            @apply --layout-vertical;\n            @apply --layout-wrap;\n          }\n          #form ::slotted(paper-input) {\n            --paper-input-container-shared-input-style: {\n              border: none !important;\n              width: 100% !important;\n              background-color: transparent !important;\n            }\n          }\n        </style>\n      </custom-style>\n\n      <template is="dom-if" if="{{!wizard}}">\n        <div class="header" hidden$="[[!label]]">[[label]]</div>\n      </template>\n      <div class="layout vertical flex start-justified">\n        <div\n          id="form"\n          class="layout horizontal flex start-justified"\n          aria-live="polite"\n        >\n          <slot></slot>\n        </div>\n      </div>\n    '],['\n      <custom-style>\n        <style is="custom-style" include="iron-flex iron-flex-alignment">\n          div.layout {\n            height: auto;\n          }\n          #form {\n            display: block;\n            @apply --eco-json-schema-object-form;\n            @apply --layout-vertical;\n            @apply --layout-wrap;\n          }\n          #form ::slotted(paper-input) {\n            --paper-input-container-shared-input-style: {\n              border: none !important;\n              width: 100% !important;\n              background-color: transparent !important;\n            }\n          }\n        </style>\n      </custom-style>\n\n      <template is="dom-if" if="{{!wizard}}">\n        <div class="header" hidden\\$="[[!label]]">[[label]]</div>\n      </template>\n      <div class="layout vertical flex start-justified">\n        <div\n          id="form"\n          class="layout horizontal flex start-justified"\n          aria-live="polite"\n        >\n          <slot></slot>\n        </div>\n      </div>\n    ']);return J=function(){return e},e}window.customElements.define(R.tag,R);var Z=function(t){function o(){return A(this,o),E(this,B(o).apply(this,arguments))}return P(o,m.mixinBehaviors([u.AppLocalizeBehavior],e.PolymerElement)),O(o,[{key:"disconnectedCallback",value:function(){this._clearForm(),$(B(o.prototype),"disconnectedCallback",this).call(this)}},{key:"_buildSchemaProperties",value:function(){var e=this;this._schemaProperties=Object.keys(this.schema.properties||[]).map(function(n){var t=e.schema.properties[n],o={property:n,label:t.title||n,schema:t,component:t.component||{}};if(o.component.valueProperty||(o.component.valueProperty="value"),o.component.slot||(o.component.slot=""),e._isSchemaEnum(t))o.component.name=o.component.name||"eco-json-schema-enum","undefined"===w(t.value)&&(t.value=""),o.value=t.value;else if(e._isSchemaBoolean(t.type))o.component.name=o.component.name||"eco-json-schema-boolean","undefined"===w(t.value)&&(t.value=!1),o.value=t.value;else if(e._isSchemaFile(t.type))o.component.name=o.component.name||"eco-json-schema-file","undefined"===w(t.value)&&(t.value={}),o.value=t.value;else if(e._isSchemaValue(t.type))o.component.name=o.component.name||"eco-json-schema-input","undefined"===w(t.value)&&(t.value=""),o.value=t.value;else if(e._isSchemaObject(t.type))o.component.name=o.component.name||"eco-json-schema-object","undefined"===w(t.value)&&(t.value={}),o.value=t.value;else{if(!e._isSchemaArray(t.type))return console.error("Unknown property type %s",t.type);o.component.name=o.component.name||"eco-json-schema-array","undefined"===w(t.value)&&(t.value=[]),o.value=t.value}return o})}},{key:"_schemaPropertyChanged",value:function(e,n){if(n){if(n.path&&/\.length$/.test(n.path))return;var t=this,o=e.target.schemaProperty,a=["value",o.property];if(n.path&&/\.splices$/.test(n.path)){for(var r=n.path.split(".").slice(1,-1);r.length;)a.push(r.shift()),o.keyMap&&o.keyMap[a.join(".")]&&(a=o.keyMap[a.join(".")].split("."));n.value.keySplices&&o.keyMap&&n.value.keySplices.forEach(function(e){e.removed.forEach(function(e){delete o.keyMap[a.concat([e]).join(".")]})}),n.value&&n.value.indexSplices.forEach(function(e){var n=[a.join("."),e.index,e.removed.length];if(e.addedCount)for(var r=0,i=e.addedCount;r<i;r++)e.addedKeys&&e.addedKeys[r]&&(o.keyMap=o.keyMap||{},o.keyMap[a.concat([e.addedKeys[r]]).join(".")]=a.concat([r+e.index]).join(".")),n.push(t._deepClone(e.object[r+e.index]));t.splice.apply(t,n)})}else if(n.path){r=n.path.split(".").slice(1);for(this.value.hasOwnProperty(o.property)||(this.set("value."+o.property,{}),this.notifyPath("value."+o.property));r.length;){var i=r.shift();a.push(i),o.keyMap&&o.keyMap[a.join(".")]&&(a=o.keyMap[a.join(".")].split("."))}this.set(a.join("."),this._deepClone(n.value)),this.notifyPath(a.join("."))}else o.value=n.value,this.set(a,this._deepClone(n.value)),this.notifyPath(a)}}},{key:"_setValue",value:function(){var e=this,n={};this._schemaProperties.forEach(function(t){"undefined"!==w(t.value)&&(n[t.property]=e._deepClone(t.value))}),this.set("value",n),this.notifyPath("value.*")}},{key:"_buildForm",value:function(){var e=this,t=this.autofocus;this._schemaProperties.forEach(function(o){var a=e.create(o.component.name,{label:o.label,schema:o.schema,schemaProperty:o,language:e.language,resources:e.resources});for(var r in"paper-input"===o.component.name&&(a.style["background-color"]="transparent",a.style.width="100%"),a.setAttribute("name",o.property),t&&a.setAttribute("autofocus",t),t=!1,a.className="flex start-justified",a[o.component.valueProperty]=o.value,o.component.attributes)a.setAttribute(r,o.component.attributes[r]);for(var i in o.component.properties)a[i]=o.component.properties[i];if(e.listen(a,o.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),"undefined"!==w(e.$)&&n.dom(e).appendChild(a),""!=o.component.slot){var l=document.createElement("div");l.innerHTML=o.component.slot;for(var s=l.cloneNode(!0);null!==n.dom(s).firstChild;)n.dom(a).appendChild(n.dom(s).firstChild)}e.dispatchEvent(new CustomEvent("form-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))})}},{key:"_removePropertyEl",value:function(e){"undefined"!==w(e.schemaProperty)&&this.unlisten(e,e.schemaProperty.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),e.schemaProperty=null,n.dom(this).removeChild(e)}},{key:"_clearForm",value:function(){if("undefined"!==w(this.$))for(var e=n.dom(this);e.firstChild;)this._removePropertyEl(e.firstChild)}},{key:"_schemaChanged",value:function(e,n){e&&(this._clearForm(),this._buildSchemaProperties(),this._buildForm(),this._setValue())}},{key:"_errorChanged",value:function(){var e=this;n.dom(this).childNodes.forEach(function(n){var t=n.getAttribute("name");e.error&&e.error[t]?n.error=e.error[t]:n.error=null})}},{key:"_deepClone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"_isSchemaValue",value:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)||this._isSchemaFile(e)}},{key:"_isSchemaFile",value:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaEnum",value:function(e){return!!e.enum}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}},{key:"focus",value:function(){console.log(this)}}],[{key:"tag",get:function(){return"eco-json-schema-object"}},{key:"template",get:function(){return e.html(J())}},{key:"properties",get:function(){return{language:{value:"en"},resources:{value:function(){return{}}},schema:{type:Object,notify:!0,observer:"_schemaChanged"},label:{type:String},value:{type:Object,notify:!0,value:function(){return{}}},error:{type:Object,observer:"_errorChanged"},wizard:{type:Boolean,notify:!0},autofocus:{type:Boolean,value:!1}}}}]),o}();function K(){var e=N(['\n      <style is="custom-style" include="iron-flex iron-flex-alignment">\n        :host {\n          display: block;\n          @apply --layout-vertical;\n        }\n\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #fff;\n          }\n        }\n\n        .box,\n        #form {\n          display: -webkit-box;\n          display: -webkit-flex;\n          display: -moz-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-flex-align: center;\n          -ms-flex-align: center;\n          -webkit-align-items: center;\n          align-items: center;\n        }\n\n        .fullbleed {\n          z-index: 1;\n        }\n\n        app-toolbar.bottom {\n          --app-toolbar-color: var(--app-primary-color);\n          --app-toolbar-background: var(--dark-theme-text-color);\n        }\n\n        app-toolbar.bottom paper-icon-button {\n          --app-toolbar-color: var(--dark-theme-text-color);\n          --app-toolbar-background: var(--app-primary-color);\n        }\n      </style>\n      <div class="vertical flex layout fullbleed">\n        \x3c!--\n        paper-icon-button id="camButton" icon="editor:insert-photo" raised>add photo</paper-icon-button\n      --\x3e\n        <app-toolbar>\n          <paper-icon-button\n            id="prevButton"\n            icon="arrow-back"\n            hidden$="{{!hasPrev}}"\n            on-click="prev"\n            raised=""\n            >{{localize(\'prev\')}}</paper-icon-button\n          ><span\n            class="title layout horizontal flex"\n            style="white-space: normal"\n            >[[title]]</span\n          >\n          <paper-icon-button\n            id="nextButton"\n            icon="arrow-forward"\n            hidden$="{{!hasNext}}"\n            on-click="next"\n            raised=""\n            >{{localize(\'next\')}}</paper-icon-button\n          >\n          <paper-icon-button\n            id="submitButton"\n            icon="cloud-upload"\n            on-click="submit"\n            raised=""\n            >{{localize(\'submit\')}}</paper-icon-button\n          >\n        </app-toolbar>\n        <iron-pages\n          id="form"\n          class="layout horizontal flex start-justified"\n          role="main"\n          selected="[[page]]"\n          attr-for-selected="name"\n        ></iron-pages>\n        <app-toolbar class="bottom">\n          <div hidden$="{{!hasPrev}}" on-click="prev">\n            <paper-icon-button id="prevButton" icon="arrow-back" raised=""\n              >{{localize(\'prev\')}}</paper-icon-button\n            >\n            <span class="title layout" style="white-space: normal"\n              >{{localize(\'prev\')}}</span\n            >\n          </div>\n          <span\n            class="title layout horizontal flex"\n            style="white-space: normal"\n          ></span>\n          <div hidden$="{{!hasNext}}" on-click="next">\n            <span class="title layout" style="white-space: normal"\n              >{{localize(\'next\')}}</span\n            >\n            <paper-icon-button id="nextButton" icon="arrow-forward" raised=""\n              >{{localize(\'next\')}}</paper-icon-button\n            >\n          </div>\n        </app-toolbar>\n      </div>\n    '],['\n      <style is="custom-style" include="iron-flex iron-flex-alignment">\n        :host {\n          display: block;\n          @apply --layout-vertical;\n        }\n\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #fff;\n          }\n        }\n\n        .box,\n        #form {\n          display: -webkit-box;\n          display: -webkit-flex;\n          display: -moz-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-flex-align: center;\n          -ms-flex-align: center;\n          -webkit-align-items: center;\n          align-items: center;\n        }\n\n        .fullbleed {\n          z-index: 1;\n        }\n\n        app-toolbar.bottom {\n          --app-toolbar-color: var(--app-primary-color);\n          --app-toolbar-background: var(--dark-theme-text-color);\n        }\n\n        app-toolbar.bottom paper-icon-button {\n          --app-toolbar-color: var(--dark-theme-text-color);\n          --app-toolbar-background: var(--app-primary-color);\n        }\n      </style>\n      <div class="vertical flex layout fullbleed">\n        \x3c!--\n        paper-icon-button id="camButton" icon="editor:insert-photo" raised>add photo</paper-icon-button\n      --\x3e\n        <app-toolbar>\n          <paper-icon-button\n            id="prevButton"\n            icon="arrow-back"\n            hidden\\$="{{!hasPrev}}"\n            on-click="prev"\n            raised=""\n            >{{localize(\'prev\')}}</paper-icon-button\n          ><span\n            class="title layout horizontal flex"\n            style="white-space: normal"\n            >[[title]]</span\n          >\n          <paper-icon-button\n            id="nextButton"\n            icon="arrow-forward"\n            hidden\\$="{{!hasNext}}"\n            on-click="next"\n            raised=""\n            >{{localize(\'next\')}}</paper-icon-button\n          >\n          <paper-icon-button\n            id="submitButton"\n            icon="cloud-upload"\n            on-click="submit"\n            raised=""\n            >{{localize(\'submit\')}}</paper-icon-button\n          >\n        </app-toolbar>\n        <iron-pages\n          id="form"\n          class="layout horizontal flex start-justified"\n          role="main"\n          selected="[[page]]"\n          attr-for-selected="name"\n        ></iron-pages>\n        <app-toolbar class="bottom">\n          <div hidden\\$="{{!hasPrev}}" on-click="prev">\n            <paper-icon-button id="prevButton" icon="arrow-back" raised=""\n              >{{localize(\'prev\')}}</paper-icon-button\n            >\n            <span class="title layout" style="white-space: normal"\n              >{{localize(\'prev\')}}</span\n            >\n          </div>\n          <span\n            class="title layout horizontal flex"\n            style="white-space: normal"\n          ></span>\n          <div hidden\\$="{{!hasNext}}" on-click="next">\n            <span class="title layout" style="white-space: normal"\n              >{{localize(\'next\')}}</span\n            >\n            <paper-icon-button id="nextButton" icon="arrow-forward" raised=""\n              >{{localize(\'next\')}}</paper-icon-button\n            >\n          </div>\n        </app-toolbar>\n      </div>\n    ']);return K=function(){return e},e}window.customElements.define(Z.tag,Z);var G=function(t){function o(){return A(this,o),E(this,B(o).apply(this,arguments))}return P(o,m.mixinBehaviors([u.AppLocalizeBehavior],e.PolymerElement)),O(o,[{key:"disconnectedCallback",value:function(){this._clearForm(),$(B(o.prototype),"disconnectedCallback",this).call(this)}},{key:"_buildSchemaProperties",value:function(){var e=this;this._schemaProperties=Object.keys(this.schema.properties||[]).map(function(n){var t=e.schema.properties[n],o={property:n,label:t.title||n,schema:t,component:t.component||{}};if(o.component.valueProperty||(o.component.valueProperty="value"),e._isSchemaEnum(t))o.component.name=o.component.name||"eco-json-schema-enum",o.value="";else if(e._isSchemaBoolean(t.type))o.component.name=o.component.name||"eco-json-schema-boolean",o.value=!1;else if(e._isSchemaFile(t.type))o.component.name=o.component.name||"eco-json-schema-file",o.value="";else if(e._isSchemaValue(t.type))o.component.name=o.component.name||"eco-json-schema-input",o.value="";else if(e._isSchemaObject(t.type))o.component.name=o.component.name||"eco-json-schema-object",o.component.wizard=!0,o.value={};else{if(!e._isSchemaArray(t.type))return console.error("Unknown property type %s",t.type);o.component.name=o.component.name||"eco-json-schema-array",o.value=[]}return e.push("pages",n),e.push("titles",t.title),o})}},{key:"_schemaPropertyChanged",value:function(e,n){if(!n.path||!/\.length$/.test(n.path)){var t=this,o=e.target.schemaProperty,a=["value",o.property];if(n.path&&/\.splices$/.test(n.path)){for(var r=n.path.split(".").slice(1,-1);r.length;)a.push(r.shift()),o.keyMap&&o.keyMap[a.join(".")]&&(a=o.keyMap[a.join(".")].split("."));n.value.keySplices&&o.keyMap&&n.value.keySplices.forEach(function(e){e.removed.forEach(function(e){delete o.keyMap[a.concat([e]).join(".")]})}),n.value.indexSplices.forEach(function(e){var n=[a.join("."),e.index,e.removed.length];if(e.addedCount)for(var r=0,i=e.addedCount;r<i;r++)e.addedKeys&&e.addedKeys[r]&&(o.keyMap=o.keyMap||{},o.keyMap[a.concat([e.addedKeys[r]]).join(".")]=a.concat([r+e.index]).join(".")),n.push(t._deepClone(e.object[r+e.index]));t.splice.apply(t,n)})}else if(n.path){r=n.path.split(".").slice(1);for(this.value.hasOwnProperty(o.property)||this.set("value."+o.property,{});r.length;){var i=r.shift();a.push(i),o.keyMap&&o.keyMap[a.join(".")]&&(a=o.keyMap[a.join(".")].split("."))}this.set(a.join("."),this._deepClone(n.value)),console.log("value: "+JSON.stringify(this.value))}}}},{key:"_setValue",value:function(){var e=this,n={};this._schemaProperties.forEach(function(t){n[t.property]=e._deepClone(t.value)}),this.value=n}},{key:"_buildForm",value:function(){var e=this,t=this;this._schemaProperties.forEach(function(o){var a=t.create(o.component.name,{label:o.label,schema:o.schema,schemaProperty:o,language:e.language,resources:e.resources});a.setAttribute("name",o.property),a.className="flex start-justified",o.value=a[o.component.valueProperty],t.listen(a,o.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),n.dom(t.$.form).appendChild(a)})}},{key:"_removePropertyEl",value:function(e){"undefined"!==w(e.schemaProperty)&&this.unlisten(e,e.schemaProperty.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),e.schemaProperty=null,n.dom(this.$.form).removeChild(e)}},{key:"_clearForm",value:function(){for(var e=n.dom(this.$.form);e.firstChild;)this._removePropertyEl(e.firstChild)}},{key:"_schemaChanged",value:function(){this._clearForm(),this._buildSchemaProperties(),this._buildForm(),this._setValue(),this.pages.length>0&&this.set("page",this.pages[0]),this.set("title",this.titles[0])}},{key:"next",value:function(){var e=this.pages.indexOf(this.page),n=e;-1!==e?(e<this.pages.length-1&&(n=e+1),this.set("page",this.pages[n]),this.set("title",this.titles[n])):console.log("Invalid current page in wizard")}},{key:"prev",value:function(){var e=this.pages.indexOf(this.page),n=e;-1!==e?(e>0&&(n=e-1),this.set("page",this.pages[n]),this.set("title",this.titles[n])):console.log("Invalid current page in wizard")}},{key:"submit",value:function(){this.dispatchEvent(new CustomEvent("submit",{bubbles:!0,cancelable:!0,composed:!0,detail:!0}))}},{key:"_pageChanged",value:function(){var e=this.pages.indexOf(this.page);0===e?this.set("hasPrev",!1):this.set("hasPrev",!0),e===this.pages.length-1?this.set("hasNext",!1):this.set("hasNext",!0)}},{key:"_errorChanged",value:function(){var e=this;n.dom(this.$.form).childNodes.forEach(function(n){var t=n.getAttribute("name");e.error&&e.error[t]?n.error=e.error[t]:n.error=null})}},{key:"_deepClone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"_isSchemaValue",value:function(e){return this._isSchemaBoolean(e)||this._isSchemaNumber(e)||this._isSchemaString(e)||this._isSchemaFile(e)}},{key:"_isSchemaFile",value:function(e){return Array.isArray(e)?-1!==e.indexOf("file"):"file"===e}},{key:"_isSchemaBoolean",value:function(e){return Array.isArray(e)?-1!==e.indexOf("boolean"):"boolean"===e}},{key:"_isSchemaEnum",value:function(e){return!!e.enum}},{key:"_isSchemaNumber",value:function(e){return Array.isArray(e)?-1!==e.indexOf("number")||-1!==e.indexOf("integer"):"number"===e||"integer"===e}},{key:"_isSchemaString",value:function(e){return Array.isArray(e)?-1!==e.indexOf("string"):"string"===e}},{key:"_isSchemaObject",value:function(e){return"object"===e}},{key:"_isSchemaArray",value:function(e){return"array"===e}}],[{key:"tag",get:function(){return"eco-json-schema-wizard"}},{key:"template",get:function(){return e.html(K())}},{key:"properties",get:function(){return{language:{type:String,notify:!0},resources:{type:Object,notify:!0},schema:{type:Object,notify:!0,observer:"_schemaChanged"},label:{type:String},value:{type:Object,notify:!0,value:function(){return{}}},page:{type:String,notify:!0,observer:"_pageChanged"},pages:{type:Array,notify:!0,value:[]},error:{type:Object,observer:"_errorChanged"},isReview:{type:Boolean,value:!1,notify:!0},canSubmit:{type:Boolean,notify:!0},hasNext:{type:Boolean,notify:!0},hasPrev:{type:Boolean,notify:!0},titles:{type:Array,notify:!0,value:[]},title:{type:String,value:"",notify:!0}}}}]),o}();window.customElements.define(G.tag,G)});
//# sourceMappingURL=eco-json-schema-form.umd.js.map
